<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>æ•°æ®åˆ†æåŒ… â€“ lczen</title>
    


<script defer src="/js/fuse.min.94c78ad70b02749822921660cf4e9f0b3701bc0680c421afb784a78228de0275.js"></script>

<script defer src="/js/helper/getParents.min.1618c696be7c98933f9a92677f518b512a74e55bdbb976b09936b4182e93181b.js"></script>

<script defer src="/js/helper/fadeinout.min.93a331f96194789a542f33690bbe4f0c102c7e78ffc018217f5a1c33010bad91.js"></script>

<script>
  "use strict";

  document.addEventListener('DOMContentLoaded', function () {
    
    var gttBtn = document.getElementById("gtt");
    gttBtn.style.display = "none";
    gttBtn.addEventListener('click', function () {
      scrollToTop(250);
    });

    function scrollToTop(scrollDuration) {
      var scrollStep = -window.scrollY / (scrollDuration / 15);
      var scrollInterval = setInterval(function () {
        if (window.scrollY != 0) {
          window.scrollBy(0, scrollStep);
        }
        else clearInterval(scrollInterval);
      }, 15);
    }

    var scrollFunction = function () {
      if (document.body.scrollTop > 250 || document.documentElement.scrollTop > 250) {
        gttBtn.style.display = "block";
      } else {
        gttBtn.style.display = "none";
      }
    }
    


    
    var expandBtn = document.querySelectorAll('.expand__button');

    for (let i = 0; i < expandBtn.length; i++) {
      expandBtn[i].addEventListener("click", function () {
        var content = this.nextElementSibling;
        if (content.style.maxHeight) {
          content.style.maxHeight = null;
          this.querySelector('svg').classList.add('expand-icon__right');
          this.querySelector('svg').classList.remove('expand-icon__down');
        } else {
          content.style.maxHeight = content.scrollHeight + "px";
          this.querySelector('svg').classList.remove('expand-icon__right');
          this.querySelector('svg').classList.add('expand-icon__down');
        }
      });
    }
    


    
    var lastScrollTop = window.pageYOffset || document.documentElement.scrollTop;
    var tocElem = document.querySelector('.toc');
    var tableOfContentsElem = tocElem ? tocElem.querySelector('#TableOfContents') : null;
    var toggleTocElem = document.getElementById('toggle-toc');
    var singleContentsElem = document.querySelector('.single__contents');
    var navbar = document.querySelector('.navbar');

    window.onscroll = function () {
      scrollFunction();
      
      var st = window.pageYOffset || document.documentElement.scrollTop;
      if (st > lastScrollTop) { 
        if (st < 250) {
          gttBtn.style.display = "none";
        } else {
          gttBtn.style.display = "block";
        }

        if (st < 45) {
          return null;
        }
        
        if (!navbar.classList.contains('navbar--hide')) {
          navbar.classList.add('navbar--hide');
        } else if (navbar.classList.contains('navbar--show')) {
          navbar.classList.remove('navbar--show');
        }
        
        singleContentsElem ? 
        singleContentsElem.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(function(elem) {
          if (toggleTocElem && !toggleTocElem.checked) {
            return null;
          }
          
          if (document.documentElement.scrollTop >= elem.offsetTop) {
            if (tableOfContentsElem) {
              var id = elem.getAttribute('id');
              tocElem.querySelectorAll('a').forEach(function (elem) {
                elem.classList.remove('active');
              });
              tocElem.querySelector('a[href="#' + id + '"]') ? 
              tocElem.querySelector('a[href="#' + id + '"]').classList.add('active') : null;

              tableOfContentsElem.querySelectorAll('ul > li').forEach(function (liElem) {
                liElem.querySelectorAll('ul').forEach(function (ulElem) {
                  ulElem.style.display = 'none';
                });
              });

              var curElem = tableOfContentsElem.querySelector(`[href="#${id}"]`);
              if (curElem && curElem.nextElementSibling) {
                curElem.nextElementSibling.style.display = 'block';
              }
              getParents(curElem, 'ul') ? 
              getParents(curElem, 'ul').forEach(function (elem) {
                elem.style.display = 'block';
              }) : null; 
            }
          }
        }) : null;
      } else { 
        if (st < 250) {
          gttBtn.style.display = "none";
        }

        if (navbar.classList.contains('navbar--hide')) {
          navbar.classList.remove('navbar--hide');
        } else if (!navbar.classList.contains('navbar--show')) {
          navbar.classList.add('navbar--show');
        }

        singleContentsElem ? 
        singleContentsElem.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(function(elem) {
          if (toggleTocElem && !toggleTocElem.checked) {
            return null;
          }

          if (document.documentElement.scrollTop >= elem.offsetTop) {
            if (tableOfContentsElem) {
              var id = elem.getAttribute('id');
              tocElem.querySelectorAll('a').forEach(function (elem) {
                elem.classList.remove('active');
              });
              tocElem.querySelector('a[href="#' + id + '"]') ? 
              tocElem.querySelector('a[href="#' + id + '"]').classList.add('active') : null;

              tableOfContentsElem.querySelectorAll('ul > li').forEach(function (liElem) {
                liElem.querySelectorAll('ul').forEach(function (ulElem) {
                  ulElem.style.display = 'none';
                });
              });

              var curElem = tableOfContentsElem.querySelector(`[href="#${id}"]`);
              if (curElem && curElem.nextElementSibling) {
                curElem.nextElementSibling.style.display = 'block';
              }
              getParents(curElem, 'ul') ? 
              getParents(curElem, 'ul').forEach(function (elem) {
                elem.style.display = 'block';
              }) : null;
            }
          }
        }) : null;

        if (tableOfContentsElem && document.documentElement.scrollTop < 250) {
          tableOfContentsElem.querySelectorAll('ul > li').forEach(function (liElem) {
            liElem.querySelectorAll('ul').forEach(function (ulElem) {
              ulElem.style.display = 'none';
            });
          });
        }
      }
      lastScrollTop = st <= 0 ? 0 : st;
    };
  


  
    var navbarBurgerElem = document.querySelector('.navbar__burger');
    var navbarMenuElem = document.querySelector('.navbar__menu');
    navbarBurgerElem ?
    navbarBurgerElem.addEventListener('click', function () {
      if (navbarBurgerElem.classList.contains('is-active')) {
        navbarBurgerElem.classList.remove('is-active');
        navbarMenuElem.classList.remove('is-active');
      } else {
        navbarBurgerElem.classList.add('is-active');
        navbarMenuElem.classList.add('is-active');
      }
    }) : null;
  


  
    var mobileSearchInputElem = document.querySelector('#search-mobile');
    var mobileSearchClassElem = document.querySelector('.mobile-search');
    var mobileSearchBtnElem = document.querySelector('#mobileSearchBtn');
    var mobileSearchCloseBtnElem = document.querySelector('#search-mobile-close');
    var mobileSearchContainer = document.querySelector('#search-mobile-container');
    var mobileSearchResultsElem = document.querySelector('#search-mobile-results');
    var htmlElem = document.querySelector('html');

    if (mobileSearchClassElem) {
      mobileSearchClassElem.style.display = 'none';
    }

    mobileSearchBtnElem ? 
    mobileSearchBtnElem.addEventListener('click', function () {
      if (mobileSearchContainer) {
        mobileSearchContainer.style.display = 'block';
      }

      if (mobileSearchInputElem) {
        mobileSearchInputElem.focus();
      }

      if (htmlElem) {
        htmlElem.style.overflowY = 'hidden';
      }
    }) : null;

    mobileSearchCloseBtnElem ? 
    mobileSearchCloseBtnElem.addEventListener('click', function() {
      if (mobileSearchContainer) {
        mobileSearchContainer.style.display = 'none';
      }

      if (mobileSearchInputElem) {
        mobileSearchInputElem.value = '';
      }
      
      if (mobileSearchResultsElem) {
        while (mobileSearchResultsElem.firstChild) {
          mobileSearchResultsElem.removeChild(mobileSearchResultsElem.firstChild);
        }
      }

      if (htmlElem) {
        htmlElem.style.overflowY = 'visible';
      }
    }) : null;

    mobileSearchInputElem ? 
    mobileSearchInputElem.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        if (mobileSearchContainer) {
          mobileSearchContainer.style.display = 'none';
        }
        
        if (mobileSearchInputElem) {
          mobileSearchInputElem.value = '';
        }

        if (mobileSearchResultsElem) {
          while (mobileSearchResultsElem.firstChild) {
            mobileSearchResultsElem.removeChild(mobileSearchResultsElem.firstChild);
          }
        }
        if (htmlElem) {
          htmlElem.style.overflowY = 'visible';
        }
      }
    }) : null;
  


  
    var localTheme = localStorage.getItem('theme');
    var rootEleme = document.getElementById('root');
    var selectThemeElem = document.querySelectorAll('.select-theme');
    var selectThemeItemElem = document.querySelectorAll('.select-theme__item');
    
    if (localTheme) {
      selectThemeItemElem ? 
      selectThemeItemElem.forEach(function (elem) {
        if (elem.text.trim() === localTheme) {
          elem.classList.add('is-active');
        } else {
          elem.classList.remove('is-active');
        }
      }) : null;
    }

    selectThemeItemElem ? 
    selectThemeItemElem.forEach(function (v, i) {
      v.addEventListener('click', function (e) {
        var selectedThemeVariant = e.target.text.trim();
        localStorage.setItem('theme', selectedThemeVariant);

        rootEleme.removeAttribute('class');
        rootEleme.classList.add(`theme__${selectedThemeVariant}`);
        selectThemeElem.forEach(function(rootElem) {
          rootElem.querySelectorAll('a').forEach(function (elem) {
            if (elem.classList) {
              if (elem.text.trim() === selectedThemeVariant) {
                if (!elem.classList.contains('is-active')) {
                  elem.classList.add('is-active');
                }
              } else {
                if (elem.classList.contains('is-active')) {
                  elem.classList.remove('is-active');
                }
              }
            }
          });
        });

        if (window.mermaid) {
          if (selectedThemeVariant === "dark" || selectedThemeVariant === "hacker") {
            mermaid.initialize({ theme: 'dark' });
            location.reload();
          } else {
            mermaid.initialize({ theme: 'default' });
            location.reload();
          }
        }

        var utterances = document.querySelector('iframe');
        if (utterances) {
          utterances.contentWindow.postMessage({
            type: 'set-theme',
            theme: selectedThemeVariant === "dark" || selectedThemeVariant === "hacker" ? 'photon-dark' : selectedThemeVariant === 'kimbie' ? 'github-dark-orange' : 'github-light',
          }, 'https://utteranc.es');
        }
      });
    }) : null;
  


  
    var baseurl = null;
    
    var siteBaseURL = JSON.parse("\"https://lczen.github.io/\"");
    var siteBaseChecker = /\/\w+\//i;
    var isSlug = siteBaseChecker.test(siteBaseURL);
    var isThemeSite = location.origin.includes('themes.gohugo.io');

    
        if (isThemeSite) {
          baseurl = "https:\/\/lczen.github.io\/\/en";
        } else {
          var hasLangPostfix = location.pathname.includes("/en");
          if (hasLangPostfix) {
            if (isSlug) {
              baseurl = location.origin + siteBaseURL.match(siteBaseChecker)[0] + "en";
            } else {
              baseurl = location.origin + "/en";
            }
          } else {
            if (isSlug) {
              baseurl = location.origin + siteBaseURL.match(siteBaseChecker)[0];
            } else {
              baseurl = location.origin;
            }
          }
        }
    

    var searchResults = null;
    var searchMenu = null;
    var searchText = null;
    
    
    var enableSearchHighlight = JSON.parse("true");

    var fuse = null;

    function endsWith(str, suffix) {
      return str.indexOf(suffix, str.length - suffix.length) !== -1;
    }

    function initFuse() {
      if (!endsWith(baseurl, "/")) {
        baseurl = baseurl + '/';
      };

      var xhr = new XMLHttpRequest();
      xhr.open('GET', baseurl + "index.json");
      xhr.setRequestHeader('Content-Type', 'application/json; charset=utf-8');
      xhr.onload = function () {
        if (xhr.status === 200) {
          fuse = new Fuse(JSON.parse(xhr.response.toString('utf-8')), {
            keys: ['title', 'description', 'content'],
            includeMatches: enableSearchHighlight,
            shouldSort: true,
            threshold: 0.4,
            location: 0,
            distance: 100,
            maxPatternLength: 32,
            minMatchCharLength: 1,
          });
        }
        else {
          console.error(`[${xhr.status}]Error:`, xhr.statusText);
        }
      };
      xhr.send();
    }

    function renderSearchResults(results) { 
      searchResults = document.getElementById('search-results');
      searchMenu = document.getElementById('search-menu');
      searchResults.setAttribute('class', 'dropdown is-active');

      var content = document.createElement('div');
      content.setAttribute('class', 'dropdown-content search-content');

      if (results.length > 0) {
        results.forEach(function (result) {
          var item = document.createElement('a');
          item.setAttribute('href', result.uri);
          item.setAttribute('class', 'dropdown-item');
          item.innerHTML = `<div class="menu-item"><div class="menu-item__title">ğŸ“„ ${result.title}</div><div class="menu-item__desc">${result.description ? result.description : result.content}</div></div>`;
          content.appendChild(item);
        });
      } else {
        var item = document.createElement('span');
        item.setAttribute('class', 'dropdown-item');
        item.innerText = 'No results found';
        content.appendChild(item);
      }

      while (searchMenu.hasChildNodes()) {
        searchMenu.removeChild(
          searchMenu.lastChild
        );
      }
      searchMenu.appendChild(content);
    }

    function renderSearchHighlightResults(results) {      
      searchResults = document.getElementById('search-results');
      searchMenu = document.getElementById('search-menu');
      searchResults.setAttribute('class', 'dropdown is-active');

      var content = document.createElement('div');
      content.setAttribute('class', 'dropdown-content search-content');

      if (results.length > 0) {
        results.forEach(function (result) {
          var item = document.createElement('a');
          item.setAttribute('href', result.item.uri);
          item.setAttribute('class', 'dropdown-item');
          item.innerHTML = `<div class="menu-item"><div class="menu-item__title">ğŸ“„ ${generateHighlightedText(result.item.title, result.matches[0].indices)}</div><div class="menu-item__desc">${result.matches[1] ? generateHighlightedText(result.item.description, result.matches[1].indices) : result.matches[2] ? generateHighlightedText(result.item.content, result.matches[2].indices) : ''}</div></div>`;
          content.appendChild(item);
        });
      } else {
        var item = document.createElement('span');
        item.setAttribute('class', 'dropdown-item');
        item.innerText = 'No results found';
        content.appendChild(item);
      }

      while (searchMenu.hasChildNodes()) {
        searchMenu.removeChild(
          searchMenu.lastChild
        );
      }
      searchMenu.appendChild(content);
    }

    function renderSearchResultsMobile(results) {
      searchResults = document.getElementById('search-mobile-results');

      var content = document.createElement('div');
      content.setAttribute('class', 'mobile-search__content');

      if (results.length > 0) {
        results.forEach(function (result) {
          var item = document.createElement('a');
          item.setAttribute('href', result.uri);
          item.innerHTML = `<div class="mobile-search__item"><div class="mobile-search__item--title">ğŸ“„ ${result.title}</div><div class="mobile-search__item--desc">${result.description ? result.description : result.content}</div></div>`;
          content.appendChild(item);
        });
      } else {
        var item = document.createElement('span');
        content.appendChild(item);
      }

      let wrap = document.getElementById('search-mobile-results');
      while (wrap.firstChild) {
        wrap.removeChild(wrap.firstChild)
      }
      searchResults.appendChild(content);      
    }

    function renderSearchHighlightResultsMobile(results) {
      searchResults = document.getElementById('search-mobile-results');

      var content = document.createElement('div');
      content.setAttribute('class', 'mobile-search__content');

      if (results.length > 0) {
        results.forEach(function (result) {
          var item = document.createElement('a');
          item.setAttribute('href', result.item.uri);
          item.innerHTML = `<div class="mobile-search__item"><div class="mobile-search__item--title">ğŸ“„ ${generateHighlightedText(result.item.title, result.matches[0].indices)}</div><div class="mobile-search__item--desc">${result.matches[1] ? generateHighlightedText(result.item.description, result.matches[1].indices) : result.matches[2] ? generateHighlightedText(result.item.content, result.matches[2].indices) : ''}</div></div>`;
          content.appendChild(item);
        });
      } else {
        var item = document.createElement('span');
        content.appendChild(item);
      }

      let wrap = document.getElementById('search-mobile-results');
      while (wrap.firstChild) {
        wrap.removeChild(wrap.firstChild)
      }
      searchResults.appendChild(content);
    }

    function generateHighlightedText(text, regions) {
      if (!regions) {
        return text;
      }

      var content = '', nextUnhighlightedRegionStartingIndex = 0;

      regions.forEach(function(region) {
        if (region[0] === region[1]) {
          return null;
        }
        
        content += '' +
          text.substring(nextUnhighlightedRegionStartingIndex, region[0]) +
          '<span class="search__highlight">' +
            text.substring(region[0], region[1] + 1) +
          '</span>' +
        '';
        nextUnhighlightedRegionStartingIndex = region[1] + 1;
      });

      content += text.substring(nextUnhighlightedRegionStartingIndex);

      return content;
    };

    initFuse();

    var searchElem = document.getElementById('search');
    var searchMobile = document.getElementById('search-mobile');

    searchElem.addEventListener('input', function(e) {
      if (!e.target.value) {
        document.getElementById('search-results').setAttribute('class', 'dropdown');
        return null;
      }

      if (window.innerWidth < 770) {
        return null;
      }

      searchText = e.target.value;
      var results = fuse.search(e.target.value);
      if (enableSearchHighlight) {
        renderSearchHighlightResults(results);
      } else {
        renderSearchResults(results);
      }
    });

    searchElem.addEventListener('blur', function() {
      if (window.innerWidth < 770) {
        return null;
      }
      setTimeout(function () {
        document.getElementById('search-results').setAttribute('class', 'dropdown');
      }, 100);
    });

    searchElem.addEventListener('click', function(e) {
      if (window.innerWidth < 770) {
        return null;
      }
      if (!e.target.value) {
        document.getElementById('search-results').setAttribute('class', 'dropdown');
        return null;
      }

      searchText = e.target.value;
      var results = fuse.search(e.target.value);
      if (enableSearchHighlight) {
        renderSearchHighlightResults(results);
      } else {
        renderSearchResults(results);
      }
    });
    
    function indexInParent(node) {
      var children = node.parentNode.childNodes;
      var num = 0;
      for (var i = 0; i < children.length; i++) {
        if (children[i] == node) return num;
        if (children[i].nodeType == 1) num++;
      }
      return -1;
    }

    var searchMenuElem = document.getElementById("search-menu");
    var activeItem = document.querySelector('#search-menu .dropdown-item.is-active');
    var activeIndex = null;
    var items = null;
    var searchContainerMaxHeight = 350;

    searchElem.addEventListener('keydown', function(e) {
      if (window.innerWidth < 770) {
        return null;
      }

      var items = document.querySelectorAll('#search-menu .dropdown-item');
      
      if (e.key === 'ArrowDown') {
        if (activeIndex === null) {
          activeIndex = 0;
          items[activeIndex].classList.remove('is-active');
        } else {
          items[activeIndex].classList.remove('is-active');
          activeIndex = activeIndex === items.length - 1 ? 0 : activeIndex + 1;
        }
        items[activeIndex].classList.add('is-active');

        let overflowedPixel = items[activeIndex].offsetTop + items[activeIndex].clientHeight - searchContainerMaxHeight;
        if (overflowedPixel > 0) {
          document.querySelector(".search-content").scrollTop += items[activeIndex].getBoundingClientRect().height;
        } else if (activeIndex === 0) {
          document.querySelector(".search-content").scrollTop = 0;
        }
      } else if (e.key === 'ArrowUp') {
        if (activeIndex === null) {
          activeIndex = items.length - 1;
          items[activeIndex].classList.remove('is-active');
        } else {
          items[activeIndex].classList.remove('is-active');
          activeIndex = activeIndex === 0 ? items.length - 1 : activeIndex - 1;
        }
        items[activeIndex].classList.add('is-active');
        
        let overflowedPixel = items[activeIndex].offsetTop + items[activeIndex].clientHeight - searchContainerMaxHeight;
        if (overflowedPixel < 0) {
          document.querySelector(".search-content").scrollTop -= items[activeIndex].getBoundingClientRect().height;
        } else {
          document.querySelector(".search-content").scrollTop = overflowedPixel + items[activeIndex].getBoundingClientRect().height;
        }
      } else if (e.key === 'Enter') {
        var currentItemLink = items[activeIndex].getAttribute('href');
        if (currentItemLink) {
          location.href = currentItemLink;
        }
      } else if (e.key === 'Escape') {
        e.target.value = null;
        if (searchResults) {
          searchResults.classList.remove('is-active');
        }
      }
    });

    searchMobile.addEventListener('input', function(e) {
      if (!e.target.value) {
        let wrap = document.getElementById('search-mobile-results');
        while (wrap.firstChild) {
          wrap.removeChild(wrap.firstChild);
        }
        return null;
      }

      searchText = e.target.value;
      var results = fuse.search(e.target.value);
      renderSearchResultsMobile(results);
      if (enableSearchHighlight) {
        renderSearchHighlightResultsMobile(results);
      } else {
        renderSearchResultsMobile(results);
      }
    });
  
  });
</script>    
    


<link rel="stylesheet" href="/css/main.min.css">


    <meta name="description" content="" />
<meta name="keywords" content="">
<meta name="created" content="2020-02-01T16:08:07&#43;0800">
<meta name="modified" content="2020-02-01T16:08:07&#43;0800">


<meta property="og:site_name" content="lczen">
<meta property="og:title" content="æ•°æ®åˆ†æåŒ…">
<meta property="og:url" content="https://lczen.github.io/en/posts/dataanalysis/">
<meta property="og:type" content="article">

<meta name="generator" content="Hugo 0.62.2" />
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="theme-color" content="#ffffff">
<link rel="canonical" href="https://lczen.github.io/en/posts/dataanalysis/">
<link rel="manifest" href="/manifest.json">

  <link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/favicon/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/favicon/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/favicon/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/favicon/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/favicon/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/favicon/android-icon-512x512.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">

    <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "headline": "æ•°æ®åˆ†æåŒ…",
    "datePublished": "2020-02-01T16:08:07+08:00",
    "dateModified": "2020-02-01T16:08:07+08:00",
    "url" : "https://lczen.github.io/en/posts/dataanalysis/",
    "description": "numpy ###åˆ‡ç‰‡ç´¢å¼• 1 2 3 4 a = np.array([[1,2,3], [4,5,6]]) b= np.random.random((2,2)) # astypeåšç±»å‹è½¬æ¢ a.astype(np.float) æ•°ç»„ç´¢å¼•ä¸åˆ‡ç‰‡/Array indexing and slicing a[:, 1:3] â€¦",
    "keywords": ["numpy"],
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://lczen.github.io/"
    },
    "publisher": {
      "@type": "Organization",
      "name": "lczen",
      "url": "https://lczen.github.io/"
    }
  }
</script>

    





    
</head>

<body id="root" class="theme__dark">
    <script>
        var localTheme = localStorage.getItem('theme');
        if (localTheme) {
            document.getElementById('root').className = `theme__${localTheme}`;
        }        
    </script>    
    
    <div id="container">
        
        <div class="wrapper">
            <nav class="navbar" role="navigation" aria-label="main navigation">
  <div class="navbar__brand">
    
    <a href="/en/" title="Home" rel="home" class="navbar__logo-link">
      <img src="/logo.png" alt="Home" class="navbar__logo">
    </a>
    
    
      <a href="/en/" title="Home" rel="home" class="navbar__title-link">
        <h6 class="navbar__title">lczen</h6>
      </a>
    
  </div>
  
  
<div class="theme-mobile">
  <div class="dropdown">
    <button class="dropdown-trigger navbar__slide-down" aria-label="Select Theme Button" style="">
      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="none" d="M24 0H0v24h24V0z"/><path fill="currentColor" d="M6.34 7.93c-3.12 3.12-3.12 8.19 0 11.31C7.9 20.8 9.95 21.58 12 21.58s4.1-.78 5.66-2.34c3.12-3.12 3.12-8.19 0-11.31l-4.95-4.95c-.39-.39-1.02-.39-1.41 0L6.34 7.93zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z"/></svg>      
    </button>
    <div class="dropdown-content select-theme">
      
        
        <a href="#" class="dropdown-item select-theme__item is-active">
          dark
        </a>
        
        <a href="#" class="dropdown-item select-theme__item ">
          light
        </a>
        
        <a href="#" class="dropdown-item select-theme__item ">
          hacker
        </a>
        
        <a href="#" class="dropdown-item select-theme__item ">
          solarized
        </a>
        
        <a href="#" class="dropdown-item select-theme__item ">
          kimbie
        </a>
        
      
    </div>
  </div>
</div>

  
<div id="mobileSearchBtn" class="mobile-search__btn">
  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
</div>

<div id="search-mobile-container" class="mobile-search hide">
  <div class="mobile-search__top">
    <input id="search-mobile" type="text" aria-label="Mobile Search" placeholder="Search" class="mobile-search__top--input"/>
    <div id="search-mobile-close" class="mobile-search__top--icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path opacity=".87" fill="none" d="M0 0h24v24H0V0z"/><path fill="currentColor" d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"/></svg>
    </div>
  </div>
  <div id="search-mobile-results" class="mobile-search__body">
    
  </div>
</div>

  
  <a role="button" class="navbar__burger" aria-label="menu" aria-expanded="false">
    <span aria-hidden="true"></span>
    <span aria-hidden="true"></span>
    <span aria-hidden="true"></span>
  </a>  

  <div class="navbar__menu">
    
<div class="theme">
  <div class="dropdown">
    <button class="dropdown-trigger navbar__slide-down" aria-label="Select Theme Button">
      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="none" d="M24 0H0v24h24V0z"/><path fill="currentColor" d="M6.34 7.93c-3.12 3.12-3.12 8.19 0 11.31C7.9 20.8 9.95 21.58 12 21.58s4.1-.78 5.66-2.34c3.12-3.12 3.12-8.19 0-11.31l-4.95-4.95c-.39-.39-1.02-.39-1.41 0L6.34 7.93zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z"/></svg>      
    </button>
    <div class="dropdown-content select-theme">
      
        
        <a href="#" class="dropdown-item select-theme__item is-active">
          dark
        </a>
        
        <a href="#" class="dropdown-item select-theme__item ">
          light
        </a>
        
        <a href="#" class="dropdown-item select-theme__item ">
          hacker
        </a>
        
        <a href="#" class="dropdown-item select-theme__item ">
          solarized
        </a>
        
        <a href="#" class="dropdown-item select-theme__item ">
          kimbie
        </a>
        
      
    </div>
  </div>
</div>

    
    
      
      
      
      
      
        <a href="/en/archive" class="navbar__menu-item navbar__slide-down ">Archive</a>
      
    
      
      
      
      
      
        <a href="/en/posts" class="navbar__menu-item navbar__slide-down active">Posts</a>
      
    
  </div>
</nav>
            
            


<script src="/js/enquire.min.dfb99dee1e029d51d6cfb672d847929890b1585402de17f5ed092edd72a688b4.js"></script>

<main class="main-main">
  
  <nav class="breadcrumb" aria-label="breadcrumbs">
  <ol>
    
  
  
  
  
  
  <li >
    
      <a href="https://lczen.github.io/en/" class="capitalize">lczen</a>
    
  </li>
  
  
  <li >
    
      <a href="https://lczen.github.io/en/posts/" class="capitalize">Posts</a>
    
  </li>
  
  
  <li  class="is-active" >
    
      <span>æ•°æ®åˆ†æåŒ…</span>
    
  </li>
  
  </ol>
  
</nav>
  
  <div class="single">
    <h2 class="single__title">æ•°æ®åˆ†æåŒ…</h2>
    <div class="single__meta">
      
<div class="single__infos">
  <time class="single__info" title="Written At">ğŸ“…&nbsp;Feb 1, 2020 </time>  &middot; <span class="single__info" title="Reading Time"> â˜• 14 min read </span>
  <span class="single__info">
    
  </span>
</div>
      <div class="single__tags caption">

  
    ğŸ·ï¸
  
  
  <li>
    <a href="/en/tags/numpy" class="single__tag" title="numpy">
      #numpy
    </a>
  </li>
    

</div>
    </div>    
    <article class="single__contents">
      
      <h2 id="numpy">numpy</h2>
<p>###åˆ‡ç‰‡ç´¢å¼•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="p">[</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span><span class="p">]</span><span class="p">)</span>
<span class="n">b</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="p">)</span>
<span class="c1"># astypeåšç±»å‹è½¬æ¢</span>
<span class="n">a</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>æ•°ç»„ç´¢å¼•ä¸åˆ‡ç‰‡/Array indexing and slicing<br />
<img src="/images/dataanalysis/numpy-index.png" alt="" /><br />
<img src="/images/dataanalysis/3d.png" alt="" /></p>
<pre><code>a[:, 1:3]
array([[[4, 5, 6]],
       [[2, 4, 5]]])
a &gt; 2
array([[[False, False,  True],
        [ True,  True,  True]],
       [[False, False,  True],
        [False,  True,  True]]])

a[a&gt;2] #æ ¹æ®æ¡ä»¶é€‰æ‹©
array([3, 4, 5, 6, 3, 4, 5])#ç­›é€‰å‡ºçš„æ˜¯ä¸€ç»´çš„ç»“æœ

a[a&gt;2] = 0 #æ ¹æ®æ¡ä»¶é€‰æ‹©æ•°æ®è¿›è¡Œèµ‹å€¼
</code></pre><h3 id="æ•°å­¦è¿ç®—">æ•°å­¦è¿ç®—</h3>
<p>ä¸åŒç»´åº¦åŠ æ³•</p>
<pre><code>a
a.shape
array([[[1, 2, 0],
        [0, 0, 0]],

       [[1, 2, 0],
        [2, 0, 0]]])
c = np.random.random((2,3))
c
c.shape
array([[0.57104354, 0.82210532, 0.99865874],
       [0.63489647, 0.51821603, 0.1772419 ]])
(2, 3)

a + c
array([[[1.57104354, 2.82210532, 0.99865874],
        [0.63489647, 0.51821603, 0.1772419 ]],

       [[1.57104354, 2.82210532, 0.99865874],
        [2.63489647, 0.51821603, 0.1772419 ]]])
</code></pre><h3 id="å¹¿æ’­ç‰¹æ€§boardcasting">å¹¿æ’­ç‰¹æ€§/boardcasting</h3>
<p><img src="/images/dataanalysis/numpy-broadcast.png" alt="" /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">a</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span><span class="p">)</span>
<span class="n">b</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="p">)</span>
<span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span> <span class="c1">#(8, 6, 6)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="ç»Ÿè®¡æ•°å­¦è¿ç®—summean">ç»Ÿè®¡æ•°å­¦è¿ç®—(sum,mean)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">a</span>
<span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="c1">#å…¨éƒ¨å…ƒç´ æ±‚å’Œ</span>
</code></pre></td></tr></table>
</div>
</div><p>array([[[0.13169241, 0.12076024, 0.94718171, 0.9868782 , 0.52460178,<br />
0.7050304 ]],<br />
[[0.75982848, 0.12849312, 0.99862352, 0.57892246, 0.93388848,<br />
0.27688479]],<br />
[[0.84861432, 0.46856831, 0.91133697, 0.43440833, 0.73288593,<br />
0.55042371]],<br />
[[0.14429995, 0.43673552, 0.39708228, 0.23377411, 0.81263233,<br />
0.53145192]],<br />
[[0.42747949, 0.99082152, 0.09460188, 0.02920687, 0.86489352,<br />
0.25205818]],<br />
[[0.15014402, 0.66933541, 0.54412228, 0.80764711, 0.09997845,<br />
0.73227461]],<br />
[[0.01941847, 0.97843217, 0.28262159, 0.27665419, 0.8822287 ,<br />
0.37638411]],<br />
[[0.35989009, 0.39787517, 0.83485582, 0.60017681, 0.86968622,<br />
0.18526147]]])<br />
25.321047407612056</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1">#æŒ‰ç…§ç¬¬1ä¸ªç»´åº¦æ±‡æ€»æ±‚å’Œ</span>
</code></pre></td></tr></table>
</div>
</div><p>array([[2.84136723, 4.19102145, 5.01042605, 3.94766809, 5.72079541,<br />
3.60976919]])</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#æŒ‰ç…§ç¬¬3ä¸ªç»´åº¦æ±‡æ€»æ±‚å’Œ</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/array.png" alt="" /><br />
sumå‡½æ•°axis = 0çš„æ—¶å€™ï¼š<br />
<img src="/images/dataanalysis/arrayd1.png" alt="" /><br />
sumå‡½æ•°axis = 1çš„æ—¶å€™ï¼š<br />
<img src="/images/dataanalysis/arrayd2.png" alt="" /><br />
sumå‡½æ•°axis = 2çš„æ—¶å€™ï¼š<br />
<img src="/images/dataanalysis/arrayd3.png" alt="" /></p>
<h3 id="ä¹˜æ³•dotmultiply">ä¹˜æ³•dot,multiply</h3>
<pre><code>np.dotæ˜¯ç‚¹ä¹˜(çŸ©é˜µä¹˜æ³•)
|A B| . |E F| = |A*E+B*G A*F+B*H|
|C D|   |G H|   |C*E+D*G C*F+D*H|

np.multiplyæ˜¯é€å…ƒç´ ä¹˜æ³•
|A B| âŠ™ |E F| = |A*E B*F|
|C D|   |G H|   |C*G D*H|
</code></pre><h2 id="pandasæ•°æ®ç»“æ„series">Pandasæ•°æ®ç»“æ„Series</h2>
<h3 id="æ„é€ å’Œåˆå§‹åŒ–series">æ„é€ å’Œåˆå§‹åŒ–Series</h3>
<pre><code>import pandas as pd
**pd.__version__ #æŸ¥çœ‹ç‰ˆæœ¬ï¼Œä¸åŒç‰ˆæœ¬çš„pandasåŠŸèƒ½æœ‰ä¸€äº›å·®å¼‚**
s = pd.Series([7, 'Beijing', 2.17, -12344, 'Happy Birthday!'])
s
</code></pre><p>0                  7<br />
1            Beijing<br />
2               2.17<br />
3             -12344<br />
4    Happy Birthday!<br />
dtype: object</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Beijing</span><span class="s1">&#39;</span><span class="p">,</span> <span class="mf">2.17</span><span class="p">,</span> <span class="o">-</span><span class="mi">12344</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Happy Birthday!</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
<span class="c1">#æŒ‡å®šindex</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Beijing</span><span class="s1">&#39;</span><span class="p">,</span> <span class="mf">2.17</span><span class="p">,</span> <span class="o">-</span><span class="mi">12344</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Happy Birthday!</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">,</span>
             <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">A</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">B</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">C</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">D</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">E</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
<span class="n">s</span>
</code></pre></td></tr></table>
</div>
</div><p>A                  7<br />
B            Beijing<br />
C               2.17<br />
D             -12344<br />
E    Happy Birthday!<br />
dtype: object</p>
<h3 id="dictionaryåˆ›å»ºseries">dictionaryåˆ›å»ºSeries</h3>
<p>è¿˜å¯ä»¥ç”¨dictionaryæ¥æ„é€ ä¸€ä¸ªSeriesï¼Œå› ä¸ºSeriesæœ¬æ¥å°±æ˜¯key value pairsã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">cities</span> <span class="o">=</span> <span class="p">{</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">Beijing</span><span class="s1">&#39;</span><span class="p">:</span> <span class="mi">55000</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Shanghai</span><span class="s1">&#39;</span><span class="p">:</span> <span class="mi">60000</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Shenzhen</span><span class="s1">&#39;</span><span class="p">:</span> <span class="mi">50000</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Hangzhou</span><span class="s1">&#39;</span><span class="p">:</span> <span class="mi">20000</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Guangzhou</span><span class="s1">&#39;</span><span class="p">:</span> <span class="mi">25000</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Suzhou</span><span class="s1">&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>
<span class="n">apts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">cities</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">price</span><span class="s2">&#34;</span><span class="p">)</span>
<span class="n">apts</span>
</code></pre></td></tr></table>
</div>
</div><p>Beijing      55000.0<br />
Shanghai     60000.0<br />
Shenzhen     50000.0<br />
Hangzhou     20000.0<br />
Guangzhou    25000.0<br />
Suzhou           NaN<br />
Name: price, dtype: float64</p>
<h3 id="numpy-ndarrayæ„å»ºä¸€ä¸ªseries">numpy ndarrayæ„å»ºä¸€ä¸ªSeries</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">a</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">b</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">c</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">d</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">e</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="seriesé€‰æ‹©æ•°æ®">Seriesé€‰æ‹©æ•°æ®</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">apts</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="p">]</span> <span class="c1">#åˆ‡ç‰‡</span>
<span class="nb">type</span><span class="p">(</span><span class="n">apts</span><span class="p">[</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="p">)</span><span class="c1">#åˆ‡ç‰‡&lt;class &#39;pandas.core.series.Series&#39;&gt;</span>
<span class="o">*</span><span class="o">*</span><span class="n">apts</span><span class="p">[</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="p">]</span><span class="o">*</span><span class="o">*</span> <span class="c1">#è¿™ç§å†™æ³•æ˜¯Seriesç‹¬æœ‰è€Œlistä¸å…·å¤‡çš„</span>
<span class="n">apts</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="p">]</span> <span class="o">+</span> <span class="n">apts</span><span class="p">[</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1">#æ³¨æ„ï¼Œåœ¨ç›¸åŠ çš„æ—¶å€™ï¼Œå…¶å®æ˜¯indexå¯¹é½çš„æ–¹å¼ç›¸åŠ çš„,å…¶ä¸­ä¸€ä¸ªæ²¡æœ‰ç»“æœæ˜¯NaN</span>
<span class="n">apts</span><span class="p">[</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">Hangzhou</span><span class="s2">&#34;</span><span class="p">]</span><span class="c1">#ä¸æ˜¾ç¤ºindexï¼Œåªæ˜¾ç¤ºvalue</span>
<span class="n">apts</span><span class="p">[</span><span class="p">[</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">Hangzhou</span><span class="s2">&#34;</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;</span><span class="s2">Beijing</span><span class="s2">&#34;</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;</span><span class="s2">Shenzhen</span><span class="s2">&#34;</span><span class="p">]</span><span class="p">]</span><span class="c1">#æ˜¾ç¤ºindexå’Œvalue</span>
<span class="sa"></span><span class="s2">&#34;</span><span class="s2">Hangzhou</span><span class="s2">&#34;</span> <span class="o">*</span><span class="o">*</span><span class="ow">in</span><span class="o">*</span><span class="o">*</span> <span class="n">apts</span> <span class="c1">#åˆ¤æ–­æ˜¯å¦æœ‰è¿™ä¸ªindex</span>
<span class="n">apts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">Chongqing</span><span class="s2">&#34;</span><span class="p">,</span> <span class="mi">55</span><span class="p">)</span> <span class="c1">#å’Œå­—å…¸ç±»ä¼¼ï¼Œé»˜è®¤å€¼æ”¾åœ¨åé¢</span>
<span class="n">apts</span><span class="p">[</span><span class="n">apts</span> <span class="o">&lt;</span> <span class="mi">50000</span><span class="p">]</span> <span class="c1">#æ¡ä»¶é€‰æ‹©</span>
<span class="n">apts</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="p">)</span> <span class="c1">#ä¸­ä½æ•°ï¼Œç»Ÿè®¡è®¡ç®—</span>
<span class="n">less_than_50000</span> <span class="o">=</span> <span class="n">apts</span> <span class="o">&lt;</span> <span class="mi">50000</span>
<span class="n">less_than_50000</span> <span class="c1">#å®é™…ä¸Šæ‹¿åˆ°çš„æ˜¯ä¸€ä¸ªTrue or Falseçš„series</span>
<span class="k">print</span><span class="p">(</span><span class="n">apts</span><span class="p">[</span><span class="n">less_than_50000</span><span class="p">]</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="serieså…ƒç´ èµ‹å€¼">Serieså…ƒç´ èµ‹å€¼</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">apts</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">Shenzhen</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">55000</span>
<span class="n">apts</span><span class="p">[</span><span class="n">apts</span> <span class="o">&lt;</span><span class="o">=</span> <span class="mi">50000</span><span class="p">]</span> <span class="o">=</span> <span class="mi">40000</span><span class="c1">#æ¡ä»¶èµ‹å€¼</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="seriesæ•°å­¦è¿ç®—">Seriesæ•°å­¦è¿ç®—</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">apts</span> <span class="o">/</span> <span class="mi">2</span> <span class="c1">#å¹¿æ’­ç‰¹æ€§</span>
<span class="n">apts</span> <span class="o">*</span><span class="o">*</span> <span class="mi">2</span> <span class="c1">#å¹¿æ’­ç‰¹æ€§</span>
<span class="n">np</span><span class="o">.</span><span class="n">square</span><span class="p">(</span><span class="n">apts</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">cars</span> <span class="o">+</span> <span class="n">apts</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span> <span class="c1">#æ³¨æ„å¹¿æ’­ç‰¹æ€§ä¸indexå¯¹é½æ±‚å’Œ</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="æ•°æ®ç»“æ„dataframehttppandaspydataorgpandas-docsstablegeneratedpandasdataframehtml">æ•°æ®ç»“æ„<a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html">Dataframe</a></h2>
<h3 id="åˆ›å»ºä¸€ä¸ªdataframe">åˆ›å»ºä¸€ä¸ªDataFrame</h3>
<p>dataframeå¯ä»¥ç”±ä¸€ä¸ªdictionaryæ„é€ å¾—åˆ°ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">city</span><span class="s1">&#39;</span><span class="p">:</span> <span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">Beijing</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Shanghai</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Guangzhou</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Shenzhen</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Hangzhou</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Chongqing</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">,</span>
       <span class="sa"></span><span class="s1">&#39;</span><span class="s1">year</span><span class="s1">&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2016</span><span class="p">,</span><span class="mi">2017</span><span class="p">,</span><span class="mi">2016</span><span class="p">,</span><span class="mi">2017</span><span class="p">,</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">2016</span><span class="p">]</span><span class="p">,</span>
       <span class="sa"></span><span class="s1">&#39;</span><span class="s1">population</span><span class="s1">&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2100</span><span class="p">,</span> <span class="mi">2300</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">]</span><span class="p">}</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>	city	year	population
0	Beijing	2016	2100
1	Shanghai	2017	2300
2	Guangzhou	2016	1000
3	Shenzhen	2017	700
4	Hangzhou	2016	500
5	Chongqing	2016	500
</code></pre><p>columnsçš„åå­—å’Œé¡ºåºå¯ä»¥æŒ‡å®š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">year</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">city</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">population</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>indexä¹Ÿå¯ä»¥æŒ‡å®š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">year</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">city</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">population</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">,</span>
                     <span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">one</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">two</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">three</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">four</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">five</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">six</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>ä¹Ÿå¯ä»¥ä»å‡ ä¸ªSeriesæ„å»ºä¸€ä¸ªDataFrame</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># indexä¼šå¯¹é½</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="p">{</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">apts</span><span class="s2">&#34;</span><span class="p">:</span> <span class="n">apts</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;</span><span class="s2">cars</span><span class="s2">&#34;</span><span class="p">:</span> <span class="n">cars</span><span class="p">}</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>ä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªlist of dictsæ¥æ„å»ºDataFrame</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="p">{</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">BOSS</span><span class="s2">&#34;</span><span class="p">:</span> <span class="mi">999999</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;</span><span class="s2">Jason</span><span class="s2">&#34;</span><span class="p">:</span> <span class="mi">50000</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;</span><span class="s2">Han</span><span class="s2">&#34;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">}</span><span class="p">,</span> <span class="p">{</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">BOSS</span><span class="s2">&#34;</span><span class="p">:</span> <span class="mi">99999</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;</span><span class="s2">Jason</span><span class="s2">&#34;</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;</span><span class="s2">Han</span><span class="s2">&#34;</span><span class="p">:</span> <span class="mi">200</span><span class="p">}</span><span class="p">]</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">BOSS</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">Han</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">Jason</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>	BOSS	Han	Jason
0	999999	1000	50000
1	99999	200	8000
</code></pre><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">salary</span><span class="s2">&#34;</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;</span><span class="s2">bonus</span><span class="s2">&#34;</span><span class="p">]</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>	BOSS	Han	Jason
salary	999999	1000	50000
bonus	99999	200	8000
</code></pre><p>æ ¹æ®columnå–æ•°æ®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="p">[</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">apts</span><span class="s2">&#34;</span><span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><p>ç®—æ•°è¿ç®—æ–°å»ºä¸€ä¸ªcolumn</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="p">[</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">total_cost</span><span class="s2">&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">apts</span><span class="s2">&#34;</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">cars</span><span class="s2">&#34;</span><span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>apts	cars	total_cost
Beijing	55000.0	300000.0	5800000.0
Chongqing	NaN	150000.0	NaN
Guangzhou	40000.0	200000.0	4200000.0
Hangzhou	40000.0	NaN	NaN
Shanghai	60000.0	400000.0	6400000.0
Shenzhen	55000.0	300000.0	5800000.0
Suzhou	NaN	NaN	NaN
Tianjin	NaN	200000.0	NaN
</code></pre><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># æ³¨æ„ä¸€ä¸‹Seriesä¸DataFrameçš„åŒºåˆ«</span>
<span class="n">frame</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">city</span><span class="s1">&#39;</span><span class="p">]</span> <span class="c1">#Series</span>
<span class="nb">type</span><span class="p">(</span><span class="n">frame</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">city</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
<span class="n">frame</span><span class="p">[</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">city</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">]</span> <span class="c1">#DataFrame</span>
<span class="nb">type</span><span class="p">(</span><span class="n">frame</span><span class="p">[</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">city</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">]</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>locæ–¹æ³•å¯ä»¥æ‹¿åˆ°è¡Œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># loc+indexå–å‡ºè¡Œ</span>
<span class="n">frame</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">three</span><span class="s1">&#39;</span><span class="p">]</span>
<span class="nb">type</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">three</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span><span class="c1">#Series</span>
</code></pre></td></tr></table>
</div>
</div><p>ilocæ–¹æ³•å¯ä»¥æ‹¿åˆ°è¡Œå’Œåˆ—ï¼ŒæŠŠpandas dataframeå½“åšnumpyçš„ndarrayæ¥æ“ä½œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">frame</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>	year	city	population
one	2016	Beijing	2100
two	2017	Shanghai	2300
three	2016	Guangzhou	1000
four	2017	Shenzhen	700
five	2016	Hangzhou	500
</code></pre><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">frame</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="c1">#ç±»ä¼¼äºnumpyçš„åˆ‡ç‰‡</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>	population
two	2300
three	1000
</code></pre><h3 id="dataframeæ•°æ®é€‰æ‹©ä¸èµ‹å€¼">DataFrameæ•°æ®é€‰æ‹©ä¸èµ‹å€¼</h3>
<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„èµ‹å€¼æ“ä½œéƒ½æ˜¯åœ¨<strong>æ•°æ®é€‰æ‹©</strong>ä¹‹åè¿›è¡Œèµ‹å€¼çš„ï¼ŒDataFrameçš„æ•°æ®é€‰æ‹©æœ‰å¾ˆå¤šä¸åŒçš„å‡½æ•°ï¼Œç›¸å¯¹æ¯”è¾ƒè‡ªç”±ã€‚ä½†æ˜¯å»ºè®®å¤§å®¶ä½¿ç”¨<strong>locå‡½æ•°</strong>è¿›è¡Œæ•°æ®é€‰æ‹©ã€‚<br />
å…·ä½“çš„è¯­æ³•ä¸º<strong>df.loc[è¡Œæ¡ä»¶,åˆ—æ¡ä»¶]</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">frame</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">one</span><span class="s2">&#34;</span><span class="p">,</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">population</span><span class="s2">&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2200</span>
<span class="n">frame</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="p">:</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">debt</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span><span class="c1">#ç»™ä¸€æ•´åˆ—èµ‹å€¼</span>
<span class="n">frame</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">six</span><span class="s1">&#39;</span><span class="p">,</span><span class="p">:</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="c1">#ç»™ä¸€æ•´è¡Œèµ‹å€¼</span>
</code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬å¯ä»¥ç»™å®šå¤šä¸ªæ¡ä»¶è¿›è¡Œç»„åˆï¼Œé€‰æ‹©å¯¹åº”çš„æ•°æ®ã€‚æ¯ä¸ªæ¡ä»¶ç”¨å°æ‹¬å·åŒ…è£¹ï¼ŒåŒæ—¶é€šè¿‡&amp;(ä¸) |(æˆ–) ~(é)è¿›è¡Œç»„åˆã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">frame</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="p">(</span><span class="n">frame</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">year</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">2016</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">frame</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">city</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">!=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">Shanghai</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">frame</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">population</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span><span class="p">,</span><span class="p">:</span><span class="p">]</span>
<span class="n">frame</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="p">(</span><span class="n">frame</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">year</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">2016</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="n">frame</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">population</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span><span class="p">,</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">year</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">city</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">population</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>	year	city	population	debt
one	2016	Beijing	2200	100
three	2016	Guangzhou	1000	100

year	city	population
one	2016	Beijing	2200
two	2017	Shanghai	2300
three	2016	Guangzhou	1000
five	2016	Hangzhou	500
</code></pre><p>è¿˜å¯ä»¥ç”¨Seriesæ¥æŒ‡å®šéœ€è¦ä¿®æ”¹çš„indexä»¥åŠç›¸å¯¹åº”çš„valueï¼Œæ²¡æœ‰æŒ‡å®šçš„é»˜è®¤ç”¨NaN.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">val</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">300</span><span class="p">]</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">two</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">three</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">five</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
<span class="n">frame</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">debt</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>     year       city  population   debt
one    2016    Beijing        2200    NaN
two    2017   Shanghai        2300  100.0
three  2016  Guangzhou        1000  200.0
four   2017   Shenzhen         700    NaN
five   2016   Hangzhou         500  300.0
six       0          0           0    NaN
</code></pre><p>å¦‚æœæˆ‘ä»¬æƒ³è¦çŸ¥é“æœ‰å“ªäº›åˆ—ï¼Œç›´æ¥ç”¨columns</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">print</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="n">frame</span><span class="o">.</span><span class="n">index</span>
</code></pre></td></tr></table>
</div>
</div><p>ä¸€ä¸ªDataFrameå°±å’Œä¸€ä¸ªnumpy 2d arrayä¸€æ ·ï¼Œå¯ä»¥è¢«è½¬ç½®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">pop</span> <span class="o">=</span> <span class="p">{</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">Beijing</span><span class="s1">&#39;</span><span class="p">:</span> <span class="p">{</span><span class="mi">2016</span><span class="p">:</span> <span class="mi">2100</span><span class="p">,</span> <span class="mi">2017</span><span class="p">:</span><span class="mi">2200</span><span class="p">}</span><span class="p">,</span>
      <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Shanghai</span><span class="s1">&#39;</span><span class="p">:</span> <span class="p">{</span><span class="mi">2015</span><span class="p">:</span><span class="mi">2400</span><span class="p">,</span> <span class="mi">2016</span><span class="p">:</span><span class="mi">2500</span><span class="p">,</span> <span class="mi">2017</span><span class="p">:</span><span class="mi">2600</span><span class="p">}</span><span class="p">}</span>
<span class="n">frame</span><span class="o">.</span><span class="n">T</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>	one	two	three	four	five	six
year	2016	2017	2016	2017	2016	0
city	Beijing	Shanghai	Guangzhou	Shenzhen	Hangzhou	0
population	2200	2300	1000	700	500	0
debt	NaN	100	200	NaN	300	NaN
</code></pre><h3 id="csvæ–‡ä»¶è¯»å†™">csvæ–‡ä»¶è¯»å†™</h3>
<ul>
<li><a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html">read_csv</a></li>
<li><a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html">to_csv</a></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pokemon</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">../data/Pokemon.csv</span><span class="s2">&#34;</span><span class="p">)</span>
<span class="n">pokemon</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="c1">#describeå¯ä»¥å¸®æˆ‘ä»¬äº†è§£æ•°æ®çš„ç»Ÿè®¡ç‰¹æ€§</span>
<span class="n">pokemon</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="p">)</span>
<span class="n">pokemon</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">HP</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">Defense</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">]</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">../data/pokemon_tmp.csv</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="æ•°æ®ç¼ºå¤±">æ•°æ®ç¼ºå¤±</h3>
<p><a href="https://pandas.pydata.org/pandas-docs/stable/missing_data.html">reference</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1">#é€‰æ‹©Type 2ä¸ºç©ºçš„é‚£è¡Œæ•°æ®ï¼ŒæŠŠType 2åˆ—çš„æ•°æ®è®¾ä¸ºType 1</span>
<span class="n">pokemon</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pokemon</span><span class="p">[</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">Type 2</span><span class="s2">&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="p">)</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;</span><span class="s2">Type 2</span><span class="s2">&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pokemon</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pokemon</span><span class="p">[</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">Type 2</span><span class="s2">&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="p">)</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;</span><span class="s2">Type 1</span><span class="s2">&#34;</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">apts</span><span class="p">[</span><span class="n">apts</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="p">)</span><span class="p">]</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">apts</span><span class="p">[</span><span class="n">apts</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="p">)</span> <span class="o">==</span> <span class="bp">False</span><span class="p">]</span><span class="p">)</span> <span class="c1">#æ ¹æ®æ˜¯å¦ç¼ºå¤±é€‰æ‹©æ•°æ®</span>
</code></pre></td></tr></table>
</div>
</div><p>ç”¨to_csvæ–¹æ³•å†™å‡ºåˆ°æ–‡ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">abcd</span><span class="s2">&#34;</span><span class="p">)</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">../data/sample.tsv</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="sa"></span><span class="s2">&#34;</span><span class="se">\t</span><span class="s2">&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>a	b	c	d
0	0.569415	0.468089	0.260840	0.172120
1	0.288680	0.771640	0.465192	0.979539
2	0.095298	0.385866	0.983792	0.412143
3	0.903898	0.327998	0.134250	0.948132
4	0.955035	0.838292	0.932714	0.630797
5	0.210932	0.428113	0.937603	0.650599
6	0.661533	0.390347	0.080175	0.159178
7	0.018230	0.961200	0.043113	0.877882
8	0.381884	0.314338	0.273786	0.200851
9	0.454861	0.283102	0.969393	0.404643
</code></pre><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="c1">#åŠ æ³•</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="æ•°æ®åˆ é™¤">æ•°æ®åˆ é™¤</h3>
<p>DataFrameä¸­çš„æ•°æ®åˆ é™¤ï¼Œå¯ä»¥ç”¨dropå®Œæˆï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼ŒDataFrameçš„å¾ˆå¤šæ“ä½œ(åŒ…æ‹¬drop)éƒ½æœ‰ä¸€ä¸ªinplaceå‚æ•°ï¼Œé»˜è®¤inplace=Falseï¼Œæˆ‘ä»¬ä¼šå¯¹æ•°æ®è¿›è¡Œå˜æ¢(æ¯”å¦‚åˆ é™¤è¡Œåˆ—)ç„¶åä»¥è¿”å›å€¼å½¢æ€è¿”å›ç»“æœï¼Œå¦‚æœinplace=Trueåˆ™ä¼šå°±åœ°å˜æ¢ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">frame</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="p">[</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">one</span><span class="s2">&#34;</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;</span><span class="s2">two</span><span class="s2">&#34;</span><span class="p">]</span><span class="p">)</span><span class="c1">#åˆ é™¤åˆ—è¡¨ä¸­çš„è¡Œ</span>
<span class="n">frame</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">debt</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="c1">#åˆ é™¤åˆ—</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="pandasä¸‹">pandasä¸‹</h2>
<h3 id="åˆ†ç»„ä¸èšåˆ">åˆ†ç»„ä¸èšåˆ</h3>
<h4 id="åˆ†ç»„groupby">åˆ†ç»„/groupby</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="n">salaries</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="p">{</span>
    <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Name</span><span class="s1">&#39;</span><span class="p">:</span> <span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">BOSS</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Jason</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Jason</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Han</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">BOSS</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">BOSS</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Jason</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">BOSS</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">,</span>
    <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Year</span><span class="s1">&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2016</span><span class="p">,</span><span class="mi">2016</span><span class="p">,</span><span class="mi">2016</span><span class="p">,</span><span class="mi">2016</span><span class="p">,</span><span class="mi">2017</span><span class="p">,</span><span class="mi">2017</span><span class="p">,</span><span class="mi">2017</span><span class="p">,</span><span class="mi">2017</span><span class="p">]</span><span class="p">,</span>
    <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Salary</span><span class="s1">&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10000</span><span class="p">,</span><span class="mi">2000</span><span class="p">,</span><span class="mi">4000</span><span class="p">,</span><span class="mi">5000</span><span class="p">,</span><span class="mi">18000</span><span class="p">,</span><span class="mi">25000</span><span class="p">,</span><span class="mi">3000</span><span class="p">,</span><span class="mi">4000</span><span class="p">]</span><span class="p">,</span>
    <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Bonus</span><span class="s1">&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3000</span><span class="p">,</span><span class="mi">1000</span><span class="p">,</span><span class="mi">1000</span><span class="p">,</span><span class="mi">1200</span><span class="p">,</span><span class="mi">4000</span><span class="p">,</span><span class="mi">2300</span><span class="p">,</span><span class="mi">500</span><span class="p">,</span><span class="mi">1000</span><span class="p">]</span>
<span class="p">}</span><span class="p">)</span>
<span class="n">salaries</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>	Name	Year	Salary	Bonus
0	BOSS	2016	10000	3000
1	Jason	2016	2000	1000
2	Jason	2016	4000	1000
3	Han	2016	5000	1200
4	BOSS	2017	18000	4000
5	BOSS	2017	25000	2300
6	Jason	2017	3000	500
7	BOSS	2017	4000	1000
</code></pre><pre><code>group_by_name = salaries.groupby('Name')
</code></pre><h3 id="èšåˆaggregatehttpspandaspydataorgpandas-docsstablegeneratedpandasdataframeaggregatehtmls">èšåˆ/<a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.aggregate.html">aggregate</a>s</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">group_by_name</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="p">)</span><span class="c1">#æŒ‰ç…§åå­—å–sum</span>
</code></pre></td></tr></table>
</div>
</div><p>é»˜è®¤ä¼šæ’åºï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¸æ’åº</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1">#ä¸¤å½¢å¼ç›¸åŒ</span>
<span class="n">salaries</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">Name</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="p">)</span>
<span class="n">group_by_name</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="nb">sum</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>group byçš„attributes</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">print</span><span class="p">(</span><span class="n">group_by_name</span><span class="o">.</span><span class="n">groups</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">group_by_name</span><span class="p">)</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>{'BOSS': Int64Index([0, 4, 5, 7], dtype='int64'), 'Han': Int64Index([3], dtype='int64'), 'Jason': Int64Index([1, 2, 6], dtype='int64')}
3
</code></pre><p>å¯ä»¥ç”¨å¤šä¸ªcolumnsåšgroup by</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">group_by_name_year</span> <span class="o">=</span> <span class="n">salaries</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">Name</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Year</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
<span class="n">group_by_name_year</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>size,mean,median</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">group_by_name_year</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="p">)</span>
<span class="n">group_by_name</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="p">)</span>
<span class="n">group_by_name</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="p">)</span>
<span class="n">group_by_name</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="éå†åˆ†ç»„">éå†åˆ†ç»„</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">group_by_name</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">=====</span><span class="s2">&#34;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>BOSS
=====
   Name  Year  Salary  Bonus
0  BOSS  2016   10000   3000
4  BOSS  2017   18000   4000
5  BOSS  2017   25000   2300
7  BOSS  2017    4000   1000


Han
=====
  Name  Year  Salary  Bonus
3  Han  2016    5000   1200


Jason
=====
    Name  Year  Salary  Bonus
1  Jason  2016    2000   1000
2  Jason  2016    4000   1000
6  Jason  2017    3000    500
</code></pre><p>é€‰æ‹©ä¸€ä¸ªgroup</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">group_by_name</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">Jason</span><span class="s2">&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>Name	Year	Salary	Bonus
1	Jason	2016	2000	1000
2	Jason	2016	4000	1000
6	Jason	2017	3000	500
</code></pre><p>aggæ˜¯aggregateçš„aliasï¼Œå¯ä»¥æ›¿ä»£ä½¿ç”¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">group_by_name</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">]</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>Year	Salary	Bonus
sum	mean	std	sum	mean	std	sum	mean	std
Name									
BOSS	8067	2016.750000	0.50000	57000	14250	9178.779875	10300	2575.000000	1260.621540
Han	2016	2016.000000	NaN	5000	5000	NaN	1200	1200.000000	NaN
Jason	6049	2016.333333	0.57735	9000	3000	1000.000000	2500	833.333333	288.675135
</code></pre><p>å¯¹æ¯ä¸€åˆ—å¯ä»¥é‡‡ç”¨ä¸åŒçš„aggregateæ“ä½œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">group_by_name</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="p">{</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">Bonus</span><span class="s2">&#34;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;</span><span class="s2">Salary</span><span class="s2">&#34;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;</span><span class="s2">Year</span><span class="s2">&#34;</span><span class="p">:</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">)</span><span class="p">}</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>	Bonus	Salary	Year
Name			
BOSS	10300	57000	2016
Han	1200	5000	2016
Jason	2500	9000	2016
</code></pre><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">group_by_name</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="transformhttpspandaspydataorgpandas-docsstablegeneratedpandasdataframetransformhtml-vs-apply"><a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.transform.html">transform</a> vs apply</h3>
<p>transformä¼šæŠŠgroupä¸­çš„æ¯ä¸€ä¸ªrecordéƒ½æŒ‰ç…§åŒæ ·çš„è§„åˆ™è½¬åŒ–</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">nvda</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">../data/NVDA.csv</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">)</span>
<span class="n">nvda</span><span class="o">.</span><span class="n">index</span>
<span class="n">nvda</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">nvda</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">year</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>transform</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">zscore</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="o">/</span><span class="n">x</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="p">)</span>
<span class="n">transformed</span> <span class="o">=</span> <span class="n">nvda</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">nvda</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">year</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">zscore</span><span class="p">)</span>
<span class="n">transformed</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>ç”¨å¦ä¸€ä¸ªfunction <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.apply.html#pandas.DataFrame.apply">apply</a> ä¹Ÿå¯ä»¥èµ·åˆ°åŒæ ·çš„æ•ˆæœ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">my_trans</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="o">*</span><span class="mi">2</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mf">1.68</span> <span class="k">else</span> <span class="n">x</span>
<span class="n">nvda</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="p">:</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">new</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nvda</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">Close</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">my_trans</span><span class="p">)</span>
<span class="n">nvda</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="p">)</span>
<span class="n">transformed</span> <span class="o">=</span> <span class="n">nvda</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">nvda</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">year</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">zscore</span><span class="p">)</span>
<span class="n">transformed</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬æ¥å°è¯•ä¸€ä¸‹æŠŠè¿™äº›æ•°æ®ç”»å‡ºæ¥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">compare</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="p">{</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">Original Adj Close</span><span class="s2">&#34;</span><span class="p">:</span> <span class="n">nvda</span><span class="p">[</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">Adj Close</span><span class="s2">&#34;</span><span class="p">]</span><span class="p">,</span> 
                        <span class="sa"></span><span class="s2">&#34;</span><span class="s2">Transormed Adj Close</span><span class="s2">&#34;</span><span class="p">:</span> <span class="n">transformed</span><span class="p">[</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">Adj Close</span><span class="s2">&#34;</span><span class="p">]</span><span class="p">}</span><span class="p">)</span>
<span class="n">compare</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>ç»™å®šèŒƒå›´</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">price_range</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="p">)</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="p">)</span>
<span class="n">nvda</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">nvda</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">year</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">price_range</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="p">)</span>
<span class="n">nvda</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">nvda</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">year</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">max</span><span class="s2">&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="filterhttpspandaspydataorgpandas-docsstablegeneratedpandasdataframefilterhtml"><a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.filter.html">filter</a></h3>
<p>æ¯”å¦‚æˆ‘ä»¬æƒ³è¦æ‰¾å‡ºç¬¦åˆç»Ÿè®¡ç‰¹å¾çš„ä¸€äº›å†…å®¹ï¼Œå°±åƒSQLé‡Œé¢çš„having, whereè¯­å¥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span><span class="p">)</span>
<span class="n">s</span>
<span class="n">s</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span>
<span class="n">s</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">)</span><span class="c1">#æ¯ä¸ªç±»åˆ«æ€»å’Œå¤§äº4</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="p">{</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">A</span><span class="s2">&#34;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;</span><span class="s2">B</span><span class="s2">&#34;</span><span class="p">:</span><span class="nb">list</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">aaabbbcc</span><span class="s2">&#34;</span><span class="p">)</span><span class="p">}</span><span class="p">)</span>
<span class="n">df</span>
<span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">B</span><span class="s2">&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span><span class="c1">#åˆ†ç»„ä»¥åï¼Œç»„ä¸­å…ƒç´ è‡³å°‘ä¸¤ä¸ª.è¿™é‡Œxæ˜¯é’ˆå¯¹ç»„</span>
<span class="n">nvda</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="p">[</span><span class="n">nvda</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">nvda</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">month</span><span class="p">]</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">Adj Close</span><span class="s2">&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="p">)</span>
<span class="n">nvda</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="p">[</span><span class="n">nvda</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">nvda</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">month</span><span class="p">,</span><span class="n">nvda</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">day</span><span class="p">]</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span>  <span class="n">x</span><span class="p">[</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">Adj Close</span><span class="s2">&#34;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="å°ç»“">å°ç»“</h3>
<p>Group by: split-apply-combine</p>
<ul>
<li>é¦–å…ˆç¬¬ä¸€æ­¥æ˜¯åˆ†ç¦»æ•°æ®splitï¼ŒæŒ‰ç…§ä¸€å®šçš„è§„åˆ™æŠŠæ•°æ®åˆ†æˆå‡ ç±»ã€‚</li>
<li>ç¬¬äºŒæ­¥æ˜¯å¯¹æ¯ä¸€éƒ¨åˆ†æ•°æ®éƒ½åšä¸€å®šçš„æ“ä½œï¼Œè¿™ä¸ªæ“ä½œå¯ä»¥æ˜¯æ±‡æ€»æ“ä½œaggregateï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå˜æ¢transformï¼Œä¹Ÿå¯ä»¥æ˜¯è¿‡æ»¤æ•°æ®filterã€‚</li>
<li>æœ€åä¸€æ­¥å°±æ˜¯æŠŠå¤„ç†è¿‡çš„æ•°æ®å†åˆæˆä¸€å¼ DataFrameã€‚</li>
</ul>
<h2 id="å¤šè¡¨åˆå¹¶ä¸æ‹¼æ¥">å¤šè¡¨åˆå¹¶ä¸æ‹¼æ¥</h2>
<ul>
<li>concat</li>
<li>append</li>
<li>merge</li>
<li>join</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="p">{</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">apts</span><span class="s1">&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">55000</span><span class="p">,</span> <span class="mi">60000</span><span class="p">]</span><span class="p">,</span>
                   <span class="sa"></span><span class="s1">&#39;</span><span class="s1">cars</span><span class="s1">&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">200000</span><span class="p">,</span> <span class="mi">300000</span><span class="p">]</span><span class="p">,</span><span class="p">}</span><span class="p">,</span>
                  <span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">Shanghai</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Beijing</span><span class="s1">&#39;</span><span class="p">]</span>
                  <span class="p">)</span>
<span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="p">{</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">cars</span><span class="s1">&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">150000</span><span class="p">,</span> <span class="mi">120000</span><span class="p">]</span><span class="p">,</span>
                    <span class="sa"></span><span class="s1">&#39;</span><span class="s1">apts</span><span class="s1">&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">25000</span><span class="p">,</span> <span class="mi">20000</span><span class="p">]</span><span class="p">,</span>
                   <span class="p">}</span><span class="p">,</span>
                  <span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">Hangzhou</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Nanjing</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
<span class="n">df3</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="p">{</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">apts</span><span class="s1">&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">30000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">]</span><span class="p">,</span>
                   <span class="sa"></span><span class="s1">&#39;</span><span class="s1">cars</span><span class="s1">&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">180000</span><span class="p">,</span> <span class="mi">100000</span><span class="p">]</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">mar</span><span class="s1">&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">180000</span><span class="p">,</span> <span class="mi">100000</span><span class="p">]</span><span class="p">}</span><span class="p">,</span>
                  <span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">Guangzhou</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Chongqing</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="concathttpspandaspydataorgpandas-docsstablegeneratedpandasconcathtml"><a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.concat.html">concat</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">ignore</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">frames</span> <span class="o">=</span> <span class="p">[</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">,</span> <span class="n">df3</span><span class="p">]</span> 
<span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="p">[</span><span class="n">df1</span><span class="p">,</span><span class="n">df2</span><span class="p">,</span><span class="n">df3</span><span class="p">]</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>åœ¨concatçš„æ—¶å€™å¯ä»¥æŒ‡å®škeysï¼Œè¿™æ ·å¯ä»¥ç»™æ¯ä¸€ä¸ªéƒ¨åˆ†åŠ ä¸Šä¸€ä¸ªKeyã€‚<br />
ä»¥ä¸‹çš„ä¾‹å­å°±æ„é€ äº†ä¸€ä¸ªhierarchical indexã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">result2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">frames</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">x</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">y</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">z</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">result2</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>              apts    cars       mar
x Shanghai   55000  200000       NaN
  Beijing    60000  300000       NaN
y Hangzhou   25000  150000       NaN
  Najing     20000  120000       NaN
z Guangzhou  30000  180000  180000.0
  Chongqing  10000  100000  100000.0
</code></pre><p>é€‰æ‹©æ•°æ®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">result2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">y</span><span class="s2">&#34;</span><span class="p">,</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">apts</span><span class="s2">&#34;</span><span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">df4</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="p">{</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">salaries</span><span class="s1">&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">30000</span><span class="p">,</span> <span class="mi">30000</span><span class="p">,</span> <span class="mi">20000</span><span class="p">,</span> <span class="mi">15000</span><span class="p">]</span><span class="p">}</span><span class="p">,</span>
                  <span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">Suzhou</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Beijing</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Shanghai</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Guangzhou</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">Tianjin</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
<span class="n">result3</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="p">[</span><span class="n">result</span><span class="p">,</span> <span class="n">df4</span><span class="p">]</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>ç”¨innerå¯ä»¥å»æ‰NaN,ä¹Ÿå°±æ˜¯è¯´å¦‚æœå‡ºç°äº†ä¸åŒ¹é…çš„è¡Œå°±ä¼šè¢«å¿½ç•¥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">result3</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="p">[</span><span class="n">result</span><span class="p">,</span> <span class="n">df4</span><span class="p">]</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">join</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">inner</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>ç”¨<a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.append.html">append</a>æ¥åšconcat</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">print</span><span class="p">(</span><span class="n">df1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="p">)</span>
<span class="n">df1</span><span class="o">.</span><span class="n">join</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="lianjia-projects">lianjia projects</h2>
<h3 id="è½½å…¥æ•°æ®">è½½å…¥æ•°æ®</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">lj_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">../data/LJdata.csv</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">lj_data</span><span class="o">.</span><span class="n">columns</span>
</code></pre></td></tr></table>
</div>
</div><p>å¤§å®¶è§„èŒƒä¸€ç‚¹ï¼Œç”¨è‹±æ–‡çš„column nameï¼Œè¿™æ ·å…å»äº†åç»­çš„ä¸€äº›é—®é¢˜(ä¸»è¦æ˜¯ç¼–ç é—®é¢˜)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">lj_data</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">district</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">address</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">title</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">house_type</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">area</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">price</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">floor</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">build_time</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">direction</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">update_time</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">view_num</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">extra_info</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">link</span><span class="s1">&#39;</span><span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="æŸ¥çœ‹æ•°æ®çš„å½¢çŠ¶å’Œä¿¡æ¯">æŸ¥çœ‹æ•°æ®çš„å½¢çŠ¶å’Œä¿¡æ¯</h3>
<p>info/<a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.describe.html">describe</a>/shape</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">lj_data</span><span class="o">.</span><span class="n">shape</span>
<span class="n">lj_data</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="p">)</span><span class="c1">#æŸ¥çœ‹æ˜¯å¦æœ‰ç©ºæ•°æ®ï¼Œisnull</span>
<span class="n">lj_data</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">all</span><span class="s1">&#39;</span><span class="p">)</span><span class="c1">#all</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="æ‰¾åˆ°æœ€è¿‘æ›´æ–°ä¿¡æ¯çš„20å¥—æˆ¿å­">æ‰¾åˆ°æœ€è¿‘æ›´æ–°ä¿¡æ¯çš„20å¥—æˆ¿å­</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">lj_data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">update_time</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="å¹³å‡çœ‹æˆ¿äººæ•°">å¹³å‡çœ‹æˆ¿äººæ•°</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">lj_data</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">view_num</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="p">)</span>
<span class="n">lj_data</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">view_num</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="p">)</span><span class="c1">#ä¸­ä½æ•°</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="æˆ¿é¾„æœ€å°çš„20å¥—æˆ¿å­çš„å¹³å‡çœ‹æˆ¿äººæ•°å¹³å‡é¢ç§¯">æˆ¿é¾„æœ€å°çš„20å¥—æˆ¿å­çš„å¹³å‡çœ‹æˆ¿äººæ•°ã€å¹³å‡é¢ç§¯</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="k">def</span> <span class="nf">get_age</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">2019</span><span class="o">-</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">NaN</span>
<span class="n">lj_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="p">:</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">age</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lj_data</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">build_time</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">get_age</span><span class="p">)</span>
<span class="n">lj_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="p">:</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">house_area</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lj_data</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">area</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="p">)</span><span class="p">)</span>
<span class="n">lj_data</span><span class="o">.</span><span class="n">nsmallest</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">age</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span><span class="p">[</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">view_num</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">house_area</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="æˆ¿å­ä»·æ ¼çš„åˆ†å¸ƒå¹³å‡æ–¹å·®ä¸­ä½æ•°">æˆ¿å­ä»·æ ¼çš„åˆ†å¸ƒ(å¹³å‡ï¼Œæ–¹å·®ï¼Œä¸­ä½æ•°)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">lj_data</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">price</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="æœ€å—æ¬¢è¿çš„æœå‘å¹³å‡çœ‹æˆ¿äººæ•°">æœ€å—æ¬¢è¿çš„æœå‘(å¹³å‡çœ‹æˆ¿äººæ•°)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">tmp</span> <span class="o">=</span> <span class="n">lj_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="p">:</span><span class="p">,</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">direction</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">view_num</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">direction</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">mean</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">tmp</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">view_num</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="æˆ¿å‹æ•°é‡åˆ†å¸ƒ">æˆ¿å‹æ•°é‡åˆ†å¸ƒ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">lj_data</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">house_type</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="p">)</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="n">lj_data</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">house_type</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">bar</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="æœ€å—æ¬¢è¿çš„æˆ¿å‹">æœ€å—æ¬¢è¿çš„æˆ¿å‹</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">tmp</span> <span class="o">=</span> <span class="n">lj_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="p">:</span><span class="p">,</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">house_type</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">view_num</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">house_type</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">mean</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">tmp</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">view_num</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="æˆ¿å­çš„å¹³å‡ç§Ÿæˆ¿ä»·æ ¼æŒ‰å¹³ç±³ç®—">æˆ¿å­çš„å¹³å‡ç§Ÿæˆ¿ä»·æ ¼(æŒ‰å¹³ç±³ç®—)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">lj_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="p">:</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">price_per_m2</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lj_data</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">price</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">lj_data</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">house_area</span><span class="s1">&#39;</span><span class="p">]</span>
<span class="n">lj_data</span><span class="o">.</span><span class="n">price_per_m2</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="æœ€å—å…³æ³¨çš„å°åŒº">æœ€å—å…³æ³¨çš„å°åŒº</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">tmp</span> <span class="o">=</span> <span class="n">lj_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="p">:</span><span class="p">,</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">address</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">view_num</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">address</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">sum</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">tmp</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">view_num</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="å‡ºç§Ÿæˆ¿æºæœ€å¤šçš„å°åŒº">å‡ºç§Ÿæˆ¿æºæœ€å¤šçš„å°åŒº</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">lj_data</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">address</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="é›†ä¸­ä¾›æš–å’Œéé›†ä¸­ä¾›æš–çš„æœ‰å¤šå°‘å®¶å¹³å‡ä»·æ ¼æ˜¯å¤šå°‘">é›†ä¸­ä¾›æš–å’Œéé›†ä¸­ä¾›æš–çš„æœ‰å¤šå°‘å®¶ï¼Œå¹³å‡ä»·æ ¼æ˜¯å¤šå°‘</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">lj_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="p">:</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">center_heating</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lj_data</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">extra_info</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">é›†ä¸­ä¾›æš–</span><span class="s1">&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span>
<span class="n">lj_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="p">:</span><span class="p">,</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">price</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">center_heating</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">center_heating</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">mean</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="ä¸åŒæˆ¿å‹çš„å¹³å‡æœ€å¤§æœ€å°é¢ç§¯">ä¸åŒæˆ¿å‹çš„å¹³å‡/æœ€å¤§/æœ€å°é¢ç§¯</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">lj_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="p">:</span><span class="p">,</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">price</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">house_type</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">house_type</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">mean</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">max</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">min</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="å“ªä¸ªåœ°é“å£é™„è¿‘çš„æˆ¿å­æœ€å¤š">å“ªä¸ªåœ°é“å£é™„è¿‘çš„æˆ¿å­æœ€å¤š</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">re</span>
<span class="k">def</span> <span class="nf">get_subway_info</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">&#39;</span>
<span class="n">pattern</span> <span class="o">=</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">è·ç¦»(.+çº¿(</span><span class="s1">\</span><span class="s1">(.*?æ®µ</span><span class="s1">\</span><span class="s1">))?)(.+ç«™)</span><span class="s1">&#39;</span>
<span class="n">lj_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="p">:</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">subway_station</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lj_data</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">extra_info</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">get_subway_info</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="p">)</span>
<span class="n">lj_data</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">subway_station</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="åœ°é“é™„è¿‘çš„æˆ¿å­å¹³å‡ä»·æ ¼-æ¯”-éåœ°é“çš„é«˜å¤šå°‘">åœ°é“é™„è¿‘çš„æˆ¿å­å¹³å‡ä»·æ ¼ æ¯” éåœ°é“çš„é«˜å¤šå°‘</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">lj_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="p">:</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">near_subway</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lj_data</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">subway_station</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">)</span>
<span class="n">lj_data</span><span class="p">[</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">price</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">near_subway</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">near_subway</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">mean</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="åœ°é“é™„è¿‘çš„æˆ¿æºç¦»åœ°é“å¹³å‡è·ç¦»">åœ°é“é™„è¿‘çš„æˆ¿æºç¦»åœ°é“å¹³å‡è·ç¦»</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">pattern</span> <span class="o">=</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">(</span><span class="s1">\</span><span class="s1">d+)ç±³</span><span class="s1">&#39;</span>
<span class="n">lj_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="p">:</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">subway_distance</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lj_data</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">extra_info</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">get_subway_info</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="p">)</span>
<span class="n">lj_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">lj_data</span><span class="o">.</span><span class="n">near_subway</span><span class="o">==</span><span class="bp">True</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">subway_distance</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="æœ€å¤šçš„åœ¨ç§Ÿæ¥¼å±‚">æœ€å¤šçš„åœ¨ç§Ÿæ¥¼å±‚</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">lj_data</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">floor</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">[</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="p">)</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="ç›´æ¥çœ‹æˆ¿çš„æˆ¿å­æ¯”ä¾‹">ç›´æ¥çœ‹æˆ¿çš„æˆ¿å­æ¯”ä¾‹</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">lj_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="p">:</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">convenient</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lj_data</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">extra_info</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">éšæ—¶çœ‹æˆ¿</span><span class="s1">&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span>
<span class="n">lj_data</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">convenient</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="åŸºäºpandasçš„å†…ç½®å¯è§†åŒ–">åŸºäºpandasçš„å†…ç½®å¯è§†åŒ–</h2>
<h3 id="åŸºæœ¬ç»˜å›¾">åŸºæœ¬ç»˜å›¾</h3>
<p>Serieså’ŒDataFrameä¸Šçš„è¿™ä¸ªåŠŸèƒ½åªæ˜¯ä½¿ç”¨matplotlibåº“çš„plot()æ–¹æ³•çš„ç®€å•åŒ…è£…å®ç°ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">2019/04/15</span><span class="s1">&#39;</span><span class="p">,</span>
   <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">ABCD</span><span class="s1">&#39;</span><span class="p">)</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/dfigure.png" alt="" /><br />
å¦‚æœç´¢å¼•ç”±æ—¥æœŸç»„æˆï¼Œåˆ™è°ƒç”¨<code>gct().autofmt_xdate()</code>æ¥æ ¼å¼åŒ–xè½´ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚<br />
æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>x</code>å’Œ<code>y</code>å…³é”®å­—ç»˜åˆ¶ä¸€åˆ—ä¸å¦ä¸€åˆ—ã€‚<br />
ç»˜å›¾æ–¹æ³•å…è®¸é™¤é»˜è®¤çº¿å›¾ä¹‹å¤–çš„å°‘æ•°ç»˜å›¾æ ·å¼ã€‚ è¿™äº›æ–¹æ³•å¯ä»¥ä½œä¸ºplot()çš„kindå…³é”®å­—å‚æ•°æä¾›ã€‚è¿™äº›åŒ…æ‹¬ -</p>
<ul>
<li><code>bar</code>æˆ–<code>barh</code>ä¸ºæ¡å½¢</li>
<li><code>hist</code>ä¸ºç›´æ–¹å›¾</li>
<li><code>boxplot</code>ä¸ºç›’å‹å›¾</li>
<li><code>area</code>ä¸ºâ€œé¢ç§¯â€</li>
<li><code>scatter</code>ä¸ºæ•£ç‚¹å›¾</li>
</ul>
<h3 id="æ¡å½¢å›¾">æ¡å½¢å›¾</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">a</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">b</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">c</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">d</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/dfbar.png" alt="" /><br />
è¦ç”Ÿæˆä¸€ä¸ªå †ç§¯æ¡å½¢å›¾ï¼Œé€šè¿‡æŒ‡å®šï¼š<code>pass stacked=True</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">a</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">b</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">c</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">d</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">stacked</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/dfstack.png" alt="" /><br />
è¦è·å¾—æ°´å¹³æ¡å½¢å›¾ï¼Œä½¿ç”¨<code>barh()</code>æ–¹æ³•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">a</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">b</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">c</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">d</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">stacked</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/dfbarh.png" alt="" /></p>
<h3 id="ç›´æ–¹å›¾">ç›´æ–¹å›¾</h3>
<p>å¯ä»¥ä½¿ç”¨<code>plot.hist()</code>æ–¹æ³•ç»˜åˆ¶ç›´æ–¹å›¾ã€‚æˆ‘ä»¬å¯ä»¥æŒ‡å®š<code>bins</code>çš„æ•°é‡å€¼ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="p">{</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">a</span><span class="s1">&#39;</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">b</span><span class="s1">&#39;</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">c</span><span class="s1">&#39;</span><span class="p">:</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">}</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">a</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">b</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">c</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/dfhist.png" alt="" /><br />
è¦ä¸ºæ¯åˆ—ç»˜åˆ¶ä¸åŒçš„ç›´æ–¹å›¾ï¼Œè¦ç”¨<code>df.plot()</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="p">{</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">a</span><span class="s1">&#39;</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">b</span><span class="s1">&#39;</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="p">,</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">c</span><span class="s1">&#39;</span><span class="p">:</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">}</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">a</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">b</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">c</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/dfbins.png" alt="" /></p>
<h3 id="ç®±å½¢å›¾">ç®±å½¢å›¾</h3>
<p><code>Boxplot</code>å¯ä»¥ç»˜åˆ¶è°ƒç”¨<code>Series.box.plot()</code>å’Œ<code>DataFrame.box.plot()</code>æˆ–<code>DataFrame.boxplot()</code>æ¥å¯è§†åŒ–æ¯åˆ—ä¸­å€¼çš„åˆ†å¸ƒã€‚<br />
ä¾‹å¦‚ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªç®±å½¢å›¾ï¼Œè¡¨ç¤ºå¯¹[0,1)ä¸Šçš„ç»Ÿä¸€éšæœºå˜é‡çš„10æ¬¡è§‚å¯Ÿçš„äº”æ¬¡è¯•éªŒã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">A</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">B</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">C</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">D</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">E</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">box</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>75%åˆ†ä½æ•°,ä¸­ä½æ•°,25%åˆ†ä½æ•°;(75%-25%)*1.5ä½œä¸ºè¾¹ç•Œå€¼<br />
<img src="/images/dataanalysis/dfbox.png" alt="" /></p>
<h3 id="åŒºåŸŸå—å›¾">åŒºåŸŸå—å›¾</h3>
<p>å¯ä»¥ä½¿ç”¨<code>Series.plot.area()</code>æˆ–<code>DataFrame.plot.area()</code>æ–¹æ³•åˆ›å»ºåŒºåŸŸå›¾å½¢</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">a</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">b</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">c</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">d</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">area</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/dfarea.png" alt="" /></p>
<h3 id="æ•£ç‚¹å›¾">æ•£ç‚¹å›¾</h3>
<p>å¯ä»¥ä½¿ç”¨<code>DataFrame.plot.scatter()</code>æ–¹æ³•åˆ›å»ºæ•£ç‚¹å›¾</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">a</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">b</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">c</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">d</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">a</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">b</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/dfscatter.png" alt="" /></p>
<h3 id="é¥¼çŠ¶å›¾">é¥¼çŠ¶å›¾</h3>
<p>é¥¼çŠ¶å›¾å¯ä»¥ä½¿ç”¨<code>DataFrame.plot.pie()</code>æ–¹æ³•åˆ›å»º</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">a</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">b</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">c</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">d</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">x</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">subplots</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/dfpie.png" alt="" /></p>
<h2 id="matplotlibå¯è§†åŒ–æ‰‹å†Œ">Matplotlibå¯è§†åŒ–æ‰‹å†Œ</h2>
<h3 id="1matplotlib-å®‰è£…é…ç½®">1.matplotlib å®‰è£…é…ç½®</h3>
<pre><code>sudo pip install numpy
sudo pip install scipy
sudo pip install matplotlib
</code></pre><h3 id="2ä¸€å¹…å¯è§†åŒ–å›¾çš„åŸºæœ¬ç»“æ„">2.ä¸€å¹…å¯è§†åŒ–å›¾çš„åŸºæœ¬ç»“æ„</h3>
<p>é€šå¸¸ï¼Œä½¿ç”¨ numpy ç»„ç»‡æ•°æ®, ä½¿ç”¨ matplotlib API è¿›è¡Œæ•°æ®å›¾åƒç»˜åˆ¶ã€‚ ä¸€å¹…æ•°æ®å›¾åŸºæœ¬ä¸ŠåŒ…æ‹¬å¦‚ä¸‹ç»“æ„ï¼š</p>
<ul>
<li>Data: æ•°æ®åŒºï¼ŒåŒ…æ‹¬æ•°æ®ç‚¹ã€æç»˜å½¢çŠ¶</li>
<li>Axis: åæ ‡è½´ï¼ŒåŒ…æ‹¬ X è½´ã€ Y è½´åŠå…¶æ ‡ç­¾ã€åˆ»åº¦å°ºåŠå…¶æ ‡ç­¾</li>
<li>Title: æ ‡é¢˜ï¼Œæ•°æ®å›¾çš„æè¿°</li>
<li>Legend: å›¾ä¾‹ï¼ŒåŒºåˆ†å›¾ä¸­åŒ…å«çš„å¤šç§æ›²çº¿æˆ–ä¸åŒåˆ†ç±»çš„æ•°æ®<br />
å…¶ä»–çš„è¿˜æœ‰å›¾å½¢æ–‡æœ¬ (Text)ã€æ³¨è§£ (Annotate)ç­‰å…¶ä»–æè¿°<br />
<img src="/images/dataanalysis/matlabel.png" alt="" /></li>
</ul>
<h3 id="3ç”»æ³•">3.ç”»æ³•</h3>
<p>ä¸‹é¢ä»¥å¸¸è§„å›¾ä¸ºä¾‹ï¼Œè¯¦ç»†è®°å½•ä½œå›¾æµç¨‹åŠæŠ€å·§ã€‚æŒ‰ç…§ç»˜å›¾ç»“æ„ï¼Œå¯å°†æ•°æ®å›¾çš„ç»˜åˆ¶åˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>å¯¼å…¥ matplotlib åŒ…ç›¸å…³å·¥å…·åŒ…</li>
<li>å‡†å¤‡æ•°æ®ï¼Œnumpy æ•°ç»„å­˜å‚¨</li>
<li>ç»˜åˆ¶åŸå§‹æ›²çº¿</li>
<li>é…ç½®æ ‡é¢˜ã€åæ ‡è½´ã€åˆ»åº¦ã€å›¾ä¾‹</li>
<li>æ·»åŠ æ–‡å­—è¯´æ˜ã€æ³¨è§£</li>
<li>æ˜¾ç¤ºã€ä¿å­˜ç»˜å›¾ç»“æœ</li>
</ul>
<h4 id="31å¯¼åŒ…">3.1å¯¼åŒ…</h4>
<p>ä¼šç”¨åˆ° matplotlib.pyplotã€pylab å’Œ numpy</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1">#coding:utf-8</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="o">*</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="32å‡†å¤‡æ•°æ®">3.2å‡†å¤‡æ•°æ®</h4>
<p>numpy å¸¸ç”¨æ¥ç»„ç»‡æºæ•°æ®:</p>
<pre><code># å®šä¹‰æ•°æ®éƒ¨åˆ†
x = np.arange(0., 10, 0.2)
y1 = np.cos(x)
y2 = np.sin(x)
y3 = np.sqrt(x)
#x = all_df['house_age']
#y = all_df['house_price']
</code></pre><h4 id="33ç»˜åˆ¶åŸºæœ¬æ›²çº¿">3.3ç»˜åˆ¶åŸºæœ¬æ›²çº¿</h4>
<p>ä½¿ç”¨ plot å‡½æ•°ç›´æ¥ç»˜åˆ¶ä¸Šè¿°å‡½æ•°æ›²çº¿ï¼Œå¯ä»¥é€šè¿‡é…ç½® plot å‡½æ•°å‚æ•°è°ƒæ•´æ›²çº¿çš„æ ·å¼ã€ç²—ç»†ã€é¢œè‰²ã€æ ‡è®°ç­‰ï¼š</p>
<h4 id="231-å…³äºé¢œè‰²çš„è¡¥å……">2.3.1 å…³äºé¢œè‰²çš„è¡¥å……</h4>
<p>ä¸»è¦æ˜¯colorå‚æ•°ï¼š</p>
<ul>
<li>r çº¢è‰²</li>
<li>g ç»¿è‰²</li>
<li>b è“è‰²</li>
<li>c cyan</li>
<li>m ç´«è‰²</li>
<li>y åœŸé»„è‰²</li>
<li>k é»‘è‰²</li>
<li>w ç™½è‰²</li>
</ul>
<h4 id="333-marker-å‚æ•°">3.3.3 marker å‚æ•°</h4>
<p>markerå‚æ•°è®¾å®šåœ¨æ›²çº¿ä¸Šæ ‡è®°çš„ç‰¹æ®Šç¬¦å·ï¼Œä»¥åŒºåˆ†ä¸åŒçš„çº¿æ®µã€‚å¸¸è§çš„å½¢çŠ¶åŠè¡¨ç¤ºç¬¦å·å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br />
<img src="/images/dataanalysis/marks.png" alt="" /></p>
<h4 id="34-è®¾ç½®åæ ‡è½´">3.4 è®¾ç½®åæ ‡è½´</h4>
<p>å¯é€šè¿‡å¦‚ä¸‹ä»£ç ï¼Œç§»åŠ¨åæ ‡è½´ spines</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># åæ ‡è½´ä¸Šç§»</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="c1">#ax = plt.subplot(2,2,1)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">right</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">none</span><span class="s1">&#39;</span><span class="p">)</span>     <span class="c1"># å»æ‰å³è¾¹çš„è¾¹æ¡†çº¿</span>
<span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">top</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">none</span><span class="s1">&#39;</span><span class="p">)</span>       <span class="c1"># å»æ‰ä¸Šè¾¹çš„è¾¹æ¡†çº¿</span>
<span class="c1"># ç§»åŠ¨ä¸‹è¾¹è¾¹æ¡†çº¿ï¼Œç›¸å½“äºç§»åŠ¨ X è½´</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">bottom</span><span class="s1">&#39;</span><span class="p">)</span>    
<span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">bottom</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">data</span><span class="s1">&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="p">)</span>
<span class="c1"># ç§»åŠ¨å·¦è¾¹è¾¹æ¡†çº¿ï¼Œç›¸å½“äºç§»åŠ¨ y è½´</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">left</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">left</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">data</span><span class="s1">&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/matticks.png" alt="" /><br />
å¯é€šè¿‡å¦‚ä¸‹ä»£ç ï¼Œè®¾ç½®åˆ»åº¦å°ºé—´éš” limã€åˆ»åº¦æ ‡ç­¾ ticks</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># è®¾ç½® x, y è½´çš„åˆ»åº¦å–å€¼èŒƒå›´</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="p">)</span><span class="o">*</span><span class="mf">1.1</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="p">)</span><span class="o">*</span><span class="mf">1.1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">)</span>
<span class="c1"># è®¾ç½® x, y è½´çš„åˆ»åº¦æ ‡ç­¾å€¼</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span><span class="p">,</span> <span class="p">[</span><span class="sa">r</span><span class="s1">&#39;</span><span class="s1">two</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">four</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">six</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">8</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">10</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]</span><span class="p">,</span>
    <span class="p">[</span><span class="sa">r</span><span class="s1">&#39;</span><span class="s1">-1.0</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">0.0</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">1.0</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">2.0</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">3.0</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">4.0</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/matxlim.png" alt="" /><br />
å¯é€šè¿‡å¦‚ä¸‹ä»£ç ï¼Œè®¾ç½® Xã€Y åæ ‡è½´å’Œæ ‡é¢˜ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># è®¾ç½®æ ‡é¢˜ã€xè½´ã€yè½´.labelpadæ§åˆ¶åˆ»åº¦æ ‡æ³¨çš„ä¸Šä¸‹ä½ç½®</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="s1">$the </span><span class="s1">\</span><span class="s1"> function </span><span class="s1">\</span><span class="s1"> figure </span><span class="s1">\</span><span class="s1"> of </span><span class="s1">\</span><span class="s1"> cos(), </span><span class="s1">\</span><span class="s1"> sin() </span><span class="s1">\</span><span class="s1"> and </span><span class="s1">\</span><span class="s1"> sqrt()$</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">19</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="s1">$the </span><span class="s1">\</span><span class="s1"> input </span><span class="s1">\</span><span class="s1"> value </span><span class="s1">\</span><span class="s1"> of </span><span class="s1">\</span><span class="s1"> x$</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mf">88.8</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="s1">$y = f(x)$</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mf">12.5</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/matpad.png" alt="" /></p>
<h4 id="35-è®¾ç½®æ–‡å­—æè¿°æ³¨è§£">3.5 è®¾ç½®æ–‡å­—æè¿°ã€æ³¨è§£</h4>
<p>å¯é€šè¿‡å¦‚ä¸‹ä»£ç ï¼Œåœ¨æ•°æ®å›¾ä¸­æ·»åŠ æ–‡å­—æè¿° textï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1">#0.8,0.9æ˜¯å–å€¼èŒƒå›´labelçš„åæ ‡</span>
<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">$x </span><span class="s1">\</span><span class="s1">in [0.0, </span><span class="s1">\</span><span class="s1"> 10.0]$</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">k</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">$y </span><span class="s1">\</span><span class="s1">in [-1.0, </span><span class="s1">\</span><span class="s1"> 4.0]$</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">k</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/matarange.png" alt="" /><br />
å¯é€šè¿‡å¦‚ä¸‹ä»£ç ï¼Œåœ¨æ•°æ®å›¾ä¸­ç»™ç‰¹æ®Šç‚¹æ·»åŠ æ³¨è§£ annotateï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># ç‰¹æ®Šç‚¹æ·»åŠ æ³¨è§£</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="p">]</span><span class="p">,</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="p">,</span><span class="p">]</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">m</span><span class="s1">&#39;</span><span class="p">)</span>  <span class="c1"># ä½¿ç”¨æ•£ç‚¹å›¾æ”¾å¤§å½“å‰ç‚¹</span>
<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="s1">$2</span><span class="s1">\</span><span class="s1">sqrt{2}$</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="p">)</span><span class="p">,</span> <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mf">8.002</span><span class="p">,</span> <span class="mf">2.83</span><span class="p">)</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">#090909</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">arrowprops</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arrowstyle</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">-&gt;</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">connectionstyle</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">arc3, rad=0.1</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">#090909</span><span class="s1">&#39;</span><span class="p">)</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/matannotate.png" alt="" /></p>
<h4 id="36-è®¾ç½®å›¾ä¾‹">3.6 è®¾ç½®å›¾ä¾‹</h4>
<p>å¯ä½¿ç”¨å¦‚ä¸‹ä¸¤ç§æ–¹å¼ï¼Œç»™ç»˜å›¾è®¾ç½®å›¾ä¾‹ï¼š</p>
<ul>
<li>1: åœ¨ plt.plot å‡½æ•°ä¸­æ·»åŠ  label å‚æ•°åï¼Œä½¿ç”¨ plt.legend(loc=â€™up rightâ€™)</li>
<li>2: ä¸ä½¿ç”¨å‚æ•° label, ç›´æ¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š<br />
plt.legend([&lsquo;cos(x)', &lsquo;sin(x)', &lsquo;sqrt(x)'], loc='upper right&rsquo;)<br />
<img src="/images/dataanalysis/matlegend.png" alt="" /></li>
</ul>
<h4 id="37-ç½‘æ ¼çº¿å¼€å…³">3.7 ç½‘æ ¼çº¿å¼€å…³</h4>
<p>å¯ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼Œç»™ç»˜å›¾è®¾ç½®ç½‘æ ¼çº¿ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># æ˜¾ç¤ºç½‘æ ¼çº¿</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/matgrid.png" alt="" /></p>
<h4 id="38-æ˜¾ç¤ºä¸å›¾åƒä¿å­˜">3.8 æ˜¾ç¤ºä¸å›¾åƒä¿å­˜</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="p">)</span>    <span class="c1"># æ˜¾ç¤º</span>
<span class="n">savefig</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">../figures/plot3d_ex.png</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">dpi</span><span class="o">=</span><span class="mi">48</span><span class="p">)</span>    <span class="c1"># ä¿å­˜ï¼Œå‰æç›®å½•å­˜åœ¨</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="4å®Œæ•´çš„ç»˜åˆ¶ç¨‹åº">4.å®Œæ•´çš„ç»˜åˆ¶ç¨‹åº</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1">#coding:utf-8</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">ignore</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># å®šä¹‰æ•°æ®éƒ¨åˆ†</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">y3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># ç»˜åˆ¶ 3 æ¡å‡½æ•°æ›²çº¿</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">blue</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">-</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">.</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;</span><span class="s1">$y = cos{x}$</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">green</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">-</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">*</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;</span><span class="s1">$y = sin{x}$</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">m</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">-</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">x</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;</span><span class="s1">$y = </span><span class="s1">\</span><span class="s1">sqrt{x}$</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># åæ ‡è½´ä¸Šç§»</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">right</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">none</span><span class="s1">&#39;</span><span class="p">)</span>     <span class="c1"># å»æ‰å³è¾¹çš„è¾¹æ¡†çº¿</span>
<span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">top</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">none</span><span class="s1">&#39;</span><span class="p">)</span>       <span class="c1"># å»æ‰ä¸Šè¾¹çš„è¾¹æ¡†çº¿</span>

<span class="c1"># ç§»åŠ¨ä¸‹è¾¹è¾¹æ¡†çº¿ï¼Œç›¸å½“äºç§»åŠ¨ X è½´</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">bottom</span><span class="s1">&#39;</span><span class="p">)</span>    
<span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">bottom</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">data</span><span class="s1">&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="p">)</span>

<span class="c1"># ç§»åŠ¨å·¦è¾¹è¾¹æ¡†çº¿ï¼Œç›¸å½“äºç§»åŠ¨ y è½´</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">left</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">left</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">data</span><span class="s1">&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="p">)</span>

<span class="c1"># è®¾ç½® x, y è½´çš„å–å€¼èŒƒå›´</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="p">)</span><span class="o">*</span><span class="mf">1.1</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="p">)</span><span class="o">*</span><span class="mf">1.1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">)</span>

<span class="c1"># è®¾ç½® x, y è½´çš„åˆ»åº¦å€¼</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span><span class="p">,</span> <span class="p">[</span><span class="sa">r</span><span class="s1">&#39;</span><span class="s1">2</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">4</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">6</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">8</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">10</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]</span><span class="p">,</span> 
    <span class="p">[</span><span class="sa">r</span><span class="s1">&#39;</span><span class="s1">-1.0</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">0.0</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">1.0</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">2.0</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">3.0</span><span class="s1">&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">4.0</span><span class="s1">&#39;</span><span class="p">]</span><span class="p">)</span>

<span class="c1"># æ·»åŠ æ–‡å­—</span>
<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">$x </span><span class="s1">\</span><span class="s1">in [0.0, </span><span class="s1">\</span><span class="s1"> 10.0]$</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">k</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mf">1.8</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="s1">$y </span><span class="s1">\</span><span class="s1">in [-1.0, </span><span class="s1">\</span><span class="s1"> 4.0]$</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">k</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

<span class="c1"># ç‰¹æ®Šç‚¹æ·»åŠ æ³¨è§£</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="p">]</span><span class="p">,</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="p">,</span><span class="p">]</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">m</span><span class="s1">&#39;</span><span class="p">)</span>  <span class="c1"># ä½¿ç”¨æ•£ç‚¹å›¾æ”¾å¤§å½“å‰ç‚¹</span>
<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="s1">$2</span><span class="s1">\</span><span class="s1">sqrt{2}$</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="p">)</span><span class="p">,</span> <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mf">8.5</span><span class="p">,</span> <span class="mf">2.2</span><span class="p">)</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">#090909</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">arrowprops</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arrowstyle</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">-&gt;</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">connectionstyle</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">arc3, rad=0.1</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">#090909</span><span class="s1">&#39;</span><span class="p">)</span><span class="p">)</span>

<span class="c1"># è®¾ç½®æ ‡é¢˜ã€xè½´ã€yè½´</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="s1">$the </span><span class="s1">\</span><span class="s1"> function </span><span class="s1">\</span><span class="s1"> figure </span><span class="s1">\</span><span class="s1"> of </span><span class="s1">\</span><span class="s1"> cos(), </span><span class="s1">\</span><span class="s1"> sin() </span><span class="s1">\</span><span class="s1"> and </span><span class="s1">\</span><span class="s1"> sqrt()$</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">19</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="s1">$the </span><span class="s1">\</span><span class="s1"> input </span><span class="s1">\</span><span class="s1"> value </span><span class="s1">\</span><span class="s1"> of </span><span class="s1">\</span><span class="s1"> x$</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mf">88.8</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="s1">$y = f(x)$</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mf">12.5</span><span class="p">)</span>

<span class="c1"># è®¾ç½®å›¾ä¾‹åŠä½ç½®</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">best</span><span class="s1">&#39;</span><span class="p">)</span>    
<span class="c1"># plt.legend([&#39;cos(x)&#39;, &#39;sin(x)&#39;, &#39;sqrt(x)&#39;], loc=&#39;up right&#39;)</span>

<span class="c1"># æ˜¾ç¤ºç½‘æ ¼çº¿</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>    

<span class="c1"># æ˜¾ç¤ºç»˜å›¾</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/matfigure.png" alt="" /></p>
<h2 id="å¸¸ç”¨å›¾å½¢">å¸¸ç”¨å›¾å½¢</h2>
<p><strong>ç»†èŠ‚çœ‹<a href="http://matplotlib.org/api/pyplot_api.html">è¿™é‡Œ</a>ï¼Œçœ‹<a href="http://matplotlib.org/api/pyplot_api.html">è¿™é‡Œ</a>ï¼Œçœ‹<a href="http://matplotlib.org/api/pyplot_api.html">è¿™é‡Œ</a></strong></p>
<ul>
<li>æ›²çº¿å›¾ï¼šmatplotlib.pyplot.plot(data)</li>
<li>ç°åº¦/ç›´æ–¹å›¾ï¼šmatplotlib.pyplot.hist(data)</li>
<li>æ•£ç‚¹å›¾ï¼šmatplotlib.pyplot.scatter(data)</li>
<li>ç®±å¼/ç®±çº¿å›¾ï¼šmatplotlib.pyplot.boxplot(data)</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span><span class="o">*</span> <span class="mi">2</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/matlines.png" alt="" /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/mathist.png" alt="" /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">figure.figsize</span><span class="s2">&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/matscatter.png" alt="" /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">figure.figsize</span><span class="s2">&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/images/dataanalysis/matbox.png" alt="" /><br />
<strong>ç®±å¼å›¾(boxplot)ç§‘æ™®</strong></p>
<ul>
<li>ä¸Šè¾¹ç¼˜ï¼ˆQ3+1.5*IQR/â€œç®±å­é«˜åº¦â€ï¼‰ã€ä¸‹è¾¹ç¼˜ï¼ˆQ1-1.5*IQR/â€œç®±å­é«˜åº¦â€ï¼‰ã€IQR=Q3-Q1</li>
<li>ä¸Šå››åˆ†ä½æ•°ï¼ˆQ3ï¼‰ã€ä¸‹å››åˆ†ä½æ•°ï¼ˆQ1ï¼‰</li>
<li>ä¸­ä½æ•°</li>
<li>å¼‚å¸¸å€¼</li>
<li>å¤„ç†å¼‚å¸¸å€¼æ—¶ä¸3$\sigma$æ ‡å‡†çš„å¼‚åŒï¼šç»Ÿè®¡è¾¹ç•Œæ˜¯å¦å—å¼‚å¸¸å€¼å½±å“ã€å®¹å¿åº¦çš„å¤§å°<br />
<strong>matplotlibçš„å·¥å…·æ‰‹å†Œåœ¨<a href="http://matplotlib.org/api/pyplot_api.html">è¿™é‡Œ</a>å¯ä»¥æŸ¥åˆ°</strong></li>
</ul>

    </article>
    
    
    <section class="related">
    
    
  </section>
    <div class="grow"></div>
<nav class="pagination-single">
  
    <a href="https://lczen.github.io/en/posts/pythonpractice2/" class="pagination-single__left">
      <div class="pagination-single__icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentColor" d="M19 11H7.83l4.88-4.88c.39-.39.39-1.03 0-1.42-.39-.39-1.02-.39-1.41 0l-6.59 6.59c-.39.39-.39 1.02 0 1.41l6.59 6.59c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L7.83 13H19c.55 0 1-.45 1-1s-.45-1-1-1z"/></svg>
      </div>
      <div class="pagination-single__left-title">pythonç»ƒä¹ é¢˜2</div>      
    </a>
  
  <div class="grow"></div>
  
    <a href="https://lczen.github.io/en/showcase/hugo/hugo-theme-zdoc/" class="pagination-single__right">      
      <div class="pagination-single__right-title">Hugo zDoc Theme</div>
      <div class="pagination-single__icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentColor" d="M5 13h11.17l-4.88 4.88c-.39.39-.39 1.03 0 1.42.39.39 1.02.39 1.41 0l6.59-6.59c.39-.39.39-1.02 0-1.41l-6.58-6.6c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L16.17 11H5c-.55 0-1 .45-1 1s.45 1 1 1z"/></svg>
      </div>
    </a>
  
</nav>
    
  

    <div class="modal micromodal-slide" id="modal" aria-hidden="true">
  <div class="modal__overlay" tabindex="-1" data-micromodal-close>
    <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
      
      <div class="modal__content" id="modal-content">
        <div id="mySwipe" class="swipe">
          <div class="swipe-wrap">
          </div>
        </div>
      </div>

      <span class="modal__items">
        
        <span class="modal__header">
          <div class="modal__paging" title="Page Info" aria-label="Current Page">
          </div>
          <div class="modal__icon modal__toolbar modal__toolbar--close" title="Close" aria-label="Close Button" data-micromodal-close>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="25" height="25"><path fill="currentColor" d="M 21.734375 19.640625 L 19.636719 21.734375 C 19.253906 22.121094 18.628906 22.121094 18.242188 21.734375 L 13 16.496094 L 7.761719 21.734375 C 7.375 22.121094 6.746094 22.121094 6.363281 21.734375 L 4.265625 19.640625 C 3.878906 19.253906 3.878906 18.628906 4.265625 18.242188 L 9.503906 13 L 4.265625 7.761719 C 3.882813 7.371094 3.882813 6.742188 4.265625 6.363281 L 6.363281 4.265625 C 6.746094 3.878906 7.375 3.878906 7.761719 4.265625 L 13 9.507813 L 18.242188 4.265625 C 18.628906 3.878906 19.257813 3.878906 19.636719 4.265625 L 21.734375 6.359375 C 22.121094 6.746094 22.121094 7.375 21.738281 7.761719 L 16.496094 13 L 21.734375 18.242188 C 22.121094 18.628906 22.121094 19.253906 21.734375 19.640625 Z"/></svg>
          </div>
          <div class="modal__icon modal__toolbar modal__toolbar--full" title="Full Screen" aria-label="Full Screen Button">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="25" height="25"><path fill="currentColor" d="M 5 3 C 3.9069372 3 3 3.9069372 3 5 L 3 8 A 1.0001 1.0001 0 1 0 5 8 L 5 5 L 8 5 A 1.0001 1.0001 0 1 0 8 3 L 5 3 z M 16 3 A 1.0001 1.0001 0 1 0 16 5 L 19 5 L 19 8 A 1.0001 1.0001 0 1 0 21 8 L 21 5 C 21 3.9069372 20.093063 3 19 3 L 16 3 z M 3.984375 14.986328 A 1.0001 1.0001 0 0 0 3 16 L 3 19 C 3 20.093063 3.9069372 21 5 21 L 8 21 A 1.0001 1.0001 0 1 0 8 19 L 5 19 L 5 16 A 1.0001 1.0001 0 0 0 3.984375 14.986328 z M 19.984375 14.986328 A 1.0001 1.0001 0 0 0 19 16 L 19 19 L 16 19 A 1.0001 1.0001 0 1 0 16 21 L 19 21 C 20.093063 21 21 20.093063 21 19 L 21 16 A 1.0001 1.0001 0 0 0 19.984375 14.986328 z"/></svg>
          </div>
          <div class="modal__icon modal__toolbar modal__toolbar--normal" title="Normal Screen" aria-label="Normal Screen Button">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="25" height="25"><path fill="currentColor" d="M 16.96875 4.972656 C 15.867188 4.988281 14.984375 5.894531 15 7 L 15 15 L 7 15 C 6.277344 14.988281 5.609375 15.367188 5.246094 15.992188 C 4.878906 16.613281 4.878906 17.386719 5.246094 18.007813 C 5.609375 18.632813 6.277344 19.011719 7 19 L 19 19 L 19 7 C 19.007813 6.460938 18.796875 5.941406 18.414063 5.558594 C 18.03125 5.175781 17.511719 4.964844 16.96875 4.972656 Z M 32.96875 4.972656 C 31.921875 4.988281 31.0625 5.8125 31.003906 6.859375 C 31 6.90625 31 6.953125 31 7 L 31 19 L 43 19 C 43.066406 19 43.132813 19 43.199219 18.992188 C 44.269531 18.894531 45.070313 17.972656 45.015625 16.902344 C 44.964844 15.828125 44.074219 14.988281 43 15 L 35 15 L 35 7 C 35.007813 6.460938 34.796875 5.941406 34.414063 5.558594 C 34.03125 5.175781 33.511719 4.964844 32.96875 4.972656 Z M 7 31 C 6.277344 30.988281 5.609375 31.367188 5.246094 31.992188 C 4.878906 32.613281 4.878906 33.386719 5.246094 34.007813 C 5.609375 34.632813 6.277344 35.011719 7 35 L 15 35 L 15 43 C 14.988281 43.722656 15.367188 44.390625 15.992188 44.753906 C 16.613281 45.121094 17.386719 45.121094 18.007813 44.753906 C 18.632813 44.390625 19.011719 43.722656 19 43 L 19 31 Z M 31 31 L 31 43 C 30.988281 43.722656 31.367188 44.390625 31.992188 44.753906 C 32.613281 45.121094 33.386719 45.121094 34.007813 44.753906 C 34.632813 44.390625 35.011719 43.722656 35 43 L 35 35 L 43 35 C 43.722656 35.011719 44.390625 34.632813 44.753906 34.007813 C 45.121094 33.386719 45.121094 32.613281 44.753906 31.992188 C 44.390625 31.367188 43.722656 30.988281 43 31 Z"/></svg>
          </div>
        </span>
        
        <div class="modal__icon modal__arrow modal__arrow--left" title="Arrow Left" aria-label="Arrow Left Button">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="28" height="28"><path fill="currentColor" d="M 23.28125 11 L 10 10 L 10 6.851563 C 10 6.523438 9.839844 6.277344 9.519531 6.03125 C 9.199219 5.949219 8.878906 5.949219 8.640625 6.113281 C 5.359375 8.410156 2.238281 12.257813 2.160156 12.421875 C 2.082031 12.578125 2.007813 12.8125 2.003906 12.976563 C 2.003906 12.980469 2 12.988281 2 12.992188 C 2 13.15625 2.078125 13.402344 2.160156 13.484375 C 2.238281 13.648438 5.28125 17.507813 8.640625 19.804688 C 8.960938 19.96875 9.28125 20.050781 9.519531 19.886719 C 9.839844 19.722656 10 19.476563 10 19.148438 L 10 16 L 23.28125 15 C 23.679688 14.679688 24 13.875 24 12.992188 C 24 12.195313 23.761719 11.320313 23.28125 11 Z"/></svg>
        </div>
        
        <div class="modal__icon modal__arrow modal__arrow--right" title="Arrow Right" aria-label="Arrow Right Button">

          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="28" height="28"><path fill="currentColor" d="M 2.71875 11.023438 L 16 10.023438 L 16 6.875 C 16 6.546875 16.160156 6.300781 16.480469 6.054688 C 16.800781 5.972656 17.121094 5.972656 17.359375 6.136719 C 20.640625 8.433594 23.761719 12.28125 23.839844 12.445313 C 23.917969 12.601563 23.992188 12.835938 23.996094 13 C 23.996094 13.003906 24 13.011719 24 13.015625 C 24 13.179688 23.921875 13.425781 23.839844 13.507813 C 23.761719 13.671875 20.71875 17.53125 17.359375 19.828125 C 17.039063 19.992188 16.71875 20.074219 16.480469 19.910156 C 16.160156 19.746094 16 19.5 16 19.171875 L 16 16.023438 L 2.71875 15.023438 C 2.320313 14.703125 2 13.898438 2 13.015625 C 2 12.21875 2.238281 11.34375 2.71875 11.023438 Z"/></svg>
        </div>

        <div class="modal__caption">
          <div class="modal__caption--text">
          </div>
        </div>

      </span>
    </div>
  </div>
</div>


<script defer src="/js/swipe.min.08ff2be1b74347bad9e267f732f1388d271b2f9d97b6a8a87bd6a510f17c5ad2.js"></script>

<script defer src="/js/micromodal.min.de01b44b2f383056bbcaf6ee921fd385d79108ec1129afd0eb2f3f5a07e11f45.js"></script>

<script defer src="/js/helper/fadeinout.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function () {
  
   
  var docElem = document.documentElement;

   
  function openFullscreen() {
    if (docElem.requestFullscreen) {
      docElem.requestFullscreen();
    } else if (docElem.mozRequestFullScreen) {  
      docElem.mozRequestFullScreen();
    } else if (docElem.webkitRequestFullscreen) {  
      docElem.webkitRequestFullscreen();
    } else if (docElem.msRequestFullscreen) {  
      docElem.msRequestFullscreen();
    }
  }

   
  function closeFullscreen() {
    if (document.fullscreenElement ||
      document.webkitFullscreenElement ||
      document.mozFullScreenElement) {
      if (document.exitFullscreen) {
        document.exitFullscreen();
      } else if (document.mozCancelFullScreen) {  
        document.mozCancelFullScreen();
      } else if (document.webkitExitFullscreen) {  
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) {  
        document.msExitFullscreen();
      }
    }
  }

  var modal = document.getElementById('modal');
  var galleryContainerElem = document.querySelector('.gallery__container');
  var swipeWrapElem = document.querySelector('.swipe-wrap');
  var mySwipeElem = document.getElementById('mySwipe');
  var arrowLeftElem = document.querySelector('.modal__arrow--left');
  var arrowRightElem = document.querySelector('.modal__arrow--right');
  var closeElem = document.querySelector('.modal__toolbar--close');
  var fullElem = document.querySelector('.modal__toolbar--full');
  var normalElem = document.querySelector('.modal__toolbar--normal');
  var captionElem = document.querySelector('.modal__caption');
  var pagingElem = document.querySelector('.modal__paging');
  var itemsElem = document.querySelector('.modal__items');
  var imgTotalNum = null;
  var myFadeTimeout = null;
  var mySwipe = null;
  var keydownFunction = function (e) {
    if (e.key === 'ArrowRight') {
      if (modal && modal.classList.contains('is-open')) {
        mySwipe.next();
      }
    } else if (e.key === 'ArrowLeft') {
      if (modal && modal.classList.contains('is-open')) {
        mySwipe.prev();
      }
    }
  }

  if (galleryContainerElem) {
    imgTotalNum = galleryContainerElem.querySelectorAll('img').length;
  } else {
    galleryContainerElem = document.querySelector('.single__contents');
    imgTotalNum = galleryContainerElem.querySelectorAll('img').length;
  }

  MicroModal.init({
    onClose: () => {
      if (mySwipe) {
        mySwipe.kill();
        mySwipe = null;
        closeFullscreen();
      }
      window.removeEventListener('keydown', keydownFunction);
    },
    disableScroll: true,
    disableFocus: true,
    awaitOpenAnimation: false,
    awaitCloseAnimation: false,
    debugMode: false,
  });

  var imageLoad = function(src) {
    return new Promise(function(resolve, reject) {
      var newImg = new Image;
      newImg.onload = function() {
        resolve(newImg);
      }
      newImg.onerror = reject;
      newImg.src = src;
    });
  }

  galleryContainerElem.querySelectorAll('img').forEach(function (elem, idx) {
    elem.style.cursor = 'pointer';

    var clonedElem = elem.cloneNode(true);
    clonedElem.style.maxHeight = '100%';
    clonedElem.style.maxWidth = '100%';
    clonedElem.onclick = function (e) {
      e.stopPropagation();
    }

    var wrapper = document.createElement('div');
    wrapper.style.width = '100%';
    wrapper.style.height = '100vh';
    wrapper.setAttribute('data-micromodal-close', '');
    wrapper.onclick = function () {
      if (mySwipe) {
        mySwipe.kill();
        mySwipe = null;
      }
    }
    wrapper.onmouseenter = function () {
      clearTimeout(myFadeTimeout);
      fadeIn(itemsElem, 200);
    };
    wrapper.onmouseleave = function () {
      myFadeTimeout = setTimeout(function () {
        fadeOut(itemsElem, 200);
      }, 2500);
    }
    wrapper.append(clonedElem);
    swipeWrapElem.append(wrapper);

    elem.addEventListener('click', async function (e) {
      MicroModal.show('modal');
      if (mySwipe) {
        mySwipe.kill();
        mySwipe = null;
      }

      var imgSrc = e.target.getAttribute('data-src') || e.target.getAttribute('src');
      var img = await imageLoad(imgSrc);
      clonedElem.style.width = img.width + 'px';
      clonedElem.style.height = img.height + 'px';
      
      
      mySwipe = new Swipe(mySwipeElem, {
        startSlide: idx,
        draggable: true,
        autoRestart: false,
        continuous: false,
        disableScroll: true,
        stopPropagation: true,
        callback: async function (index, element) {
          
          var imgElem = element.querySelector('img');
          var imgSrc = imgElem.getAttribute('data-src') || imgElem.getAttribute('src');
          var img = await imageLoad(imgSrc);
          imgElem.style.width = img.width + 'px';
          imgElem.style.height = img.height + 'px';

          
          if (captionElem && imgElem) {
            var caption = null;
            if (imgElem.getAttribute('data-caption')) {
              caption = imgElem.getAttribute('data-caption');
            } else if (imgElem.getAttribute('title')) {
              caption = imgElem.getAttribute('title');
            } else if (imgElem.getAttribute('alt')) {
              caption = imgElem.getAttribute('alt');
            } else {
              caption = imgElem.getAttribute('src');
            }

            captionElem.querySelector('.modal__caption--text').innerText = caption;
            pagingElem.innerText = (index + 1) + ' / ' + imgTotalNum;

            clearTimeout(myFadeTimeout);
            fadeIn(itemsElem, 200);
          }
        },
      });

      fadeIn(itemsElem);

      
      if (captionElem) {
        var caption = null;
        if (e.target.getAttribute('data-caption')) {
          caption = e.target.getAttribute('data-caption');
        } else if (e.target.getAttribute('title')) {
          caption = e.target.getAttribute('title');
        } else if (e.target.getAttribute('alt')) {
          caption = e.target.getAttribute('alt');
        } else {
          caption = e.target.getAttribute('src');
        }

        captionElem.querySelector('.modal__caption--text').innerText = caption;
        pagingElem.innerText = (idx + 1) + ' / ' + imgTotalNum;
      }

      if (normalElem && fullElem) {
        normalElem.style.zIndex = -1;
        normalElem.style.opacity = 0;
        fullElem.style.zIndex = 25;
        fullElem.style.opacity = 1;
      }
    });

    window.addEventListener('keydown', keydownFunction);
  });

  arrowLeftElem ?
    arrowLeftElem.addEventListener('click', function (e) {
      if (mySwipe) {
        mySwipe.prev();
      }
    }) : null;
  arrowRightElem ?
    arrowRightElem.addEventListener('click', function (e) {
      if (mySwipe) {
        mySwipe.next();
      }
    }) : null;

  closeElem ?
    closeElem.addEventListener('click', function () {
      if (mySwipe) {
        mySwipe.kill();
        mySwipe = null;
      }
      closeFullscreen();
      MicroModal.close('modal');
    }) : null;

  fullElem ?
    fullElem.addEventListener('click', function (e) {
      openFullscreen();
      if (normalElem) {
        normalElem.style.zIndex = 25;
        normalElem.style.opacity = 1;
        fullElem.style.zIndex = -1;
        fullElem.style.opacity = 0;
      }
    }) : null;

  normalElem ?
    normalElem.addEventListener('click', function (e) {
      closeFullscreen();
      if (fullElem) {
        fullElem.style.zIndex = 25;
        fullElem.style.opacity = 1;
        normalElem.style.zIndex = -1;
        normalElem.style.opacity = 0;
      }
    }) : null;
  
});
</script>

    <div class="hide">
    

<div class="search">
  <span class="icon">
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
  </span>
  <input id="search" aria-label="Site Search" class="input" type="text" placeholder="Search" autocomplete="off">
  <div id="search-results" class="dropdown">
    <div id="search-menu" class="dropdown-menu" role="menu">
    </div>
  </div>
</div>


    </div>
  </div>
</main>


<aside class="main-side">
  


<section class="sidebar">
  <div class="toc__flexbox" data-position="fixed">
    <h6 class="toc__title">What&#39;s on this Page</h6>
    
      <label class="switch">
        <input id="toggle-toc" aria-label="Toggle TOC" type="checkbox" checked>
        <span class="slider round"></span>
      </label>
    
  </div>
  <div class="toc ">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#numpy">numpy</a>
      <ul>
        <li><a href="#æ•°å­¦è¿ç®—">æ•°å­¦è¿ç®—</a></li>
        <li><a href="#å¹¿æ’­ç‰¹æ€§boardcasting">å¹¿æ’­ç‰¹æ€§/boardcasting</a></li>
        <li><a href="#ç»Ÿè®¡æ•°å­¦è¿ç®—summean">ç»Ÿè®¡æ•°å­¦è¿ç®—(sum,mean)</a></li>
        <li><a href="#ä¹˜æ³•dotmultiply">ä¹˜æ³•dot,multiply</a></li>
      </ul>
    </li>
    <li><a href="#pandasæ•°æ®ç»“æ„series">Pandasæ•°æ®ç»“æ„Series</a>
      <ul>
        <li><a href="#æ„é€ å’Œåˆå§‹åŒ–series">æ„é€ å’Œåˆå§‹åŒ–Series</a></li>
        <li><a href="#dictionaryåˆ›å»ºseries">dictionaryåˆ›å»ºSeries</a></li>
        <li><a href="#numpy-ndarrayæ„å»ºä¸€ä¸ªseries">numpy ndarrayæ„å»ºä¸€ä¸ªSeries</a></li>
        <li><a href="#seriesé€‰æ‹©æ•°æ®">Seriesé€‰æ‹©æ•°æ®</a></li>
        <li><a href="#serieså…ƒç´ èµ‹å€¼">Serieså…ƒç´ èµ‹å€¼</a></li>
        <li><a href="#seriesæ•°å­¦è¿ç®—">Seriesæ•°å­¦è¿ç®—</a></li>
      </ul>
    </li>
    <li><a href="#æ•°æ®ç»“æ„dataframehttppandaspydataorgpandas-docsstablegeneratedpandasdataframehtml">æ•°æ®ç»“æ„Dataframe</a>
      <ul>
        <li><a href="#åˆ›å»ºä¸€ä¸ªdataframe">åˆ›å»ºä¸€ä¸ªDataFrame</a></li>
        <li><a href="#dataframeæ•°æ®é€‰æ‹©ä¸èµ‹å€¼">DataFrameæ•°æ®é€‰æ‹©ä¸èµ‹å€¼</a></li>
        <li><a href="#csvæ–‡ä»¶è¯»å†™">csvæ–‡ä»¶è¯»å†™</a></li>
        <li><a href="#æ•°æ®ç¼ºå¤±">æ•°æ®ç¼ºå¤±</a></li>
        <li><a href="#æ•°æ®åˆ é™¤">æ•°æ®åˆ é™¤</a></li>
      </ul>
    </li>
    <li><a href="#pandasä¸‹">pandasä¸‹</a>
      <ul>
        <li><a href="#åˆ†ç»„ä¸èšåˆ">åˆ†ç»„ä¸èšåˆ</a>
          <ul>
            <li><a href="#åˆ†ç»„groupby">åˆ†ç»„/groupby</a></li>
          </ul>
        </li>
        <li><a href="#èšåˆaggregatehttpspandaspydataorgpandas-docsstablegeneratedpandasdataframeaggregatehtmls">èšåˆ/aggregates</a></li>
        <li><a href="#éå†åˆ†ç»„">éå†åˆ†ç»„</a></li>
        <li><a href="#transformhttpspandaspydataorgpandas-docsstablegeneratedpandasdataframetransformhtml-vs-apply">transform vs apply</a></li>
        <li><a href="#filterhttpspandaspydataorgpandas-docsstablegeneratedpandasdataframefilterhtml">filter</a></li>
        <li><a href="#å°ç»“">å°ç»“</a></li>
      </ul>
    </li>
    <li><a href="#å¤šè¡¨åˆå¹¶ä¸æ‹¼æ¥">å¤šè¡¨åˆå¹¶ä¸æ‹¼æ¥</a>
      <ul>
        <li><a href="#concathttpspandaspydataorgpandas-docsstablegeneratedpandasconcathtml">concat</a></li>
      </ul>
    </li>
    <li><a href="#lianjia-projects">lianjia projects</a>
      <ul>
        <li><a href="#è½½å…¥æ•°æ®">è½½å…¥æ•°æ®</a></li>
        <li><a href="#æŸ¥çœ‹æ•°æ®çš„å½¢çŠ¶å’Œä¿¡æ¯">æŸ¥çœ‹æ•°æ®çš„å½¢çŠ¶å’Œä¿¡æ¯</a></li>
        <li><a href="#æ‰¾åˆ°æœ€è¿‘æ›´æ–°ä¿¡æ¯çš„20å¥—æˆ¿å­">æ‰¾åˆ°æœ€è¿‘æ›´æ–°ä¿¡æ¯çš„20å¥—æˆ¿å­</a></li>
        <li><a href="#å¹³å‡çœ‹æˆ¿äººæ•°">å¹³å‡çœ‹æˆ¿äººæ•°</a></li>
        <li><a href="#æˆ¿é¾„æœ€å°çš„20å¥—æˆ¿å­çš„å¹³å‡çœ‹æˆ¿äººæ•°å¹³å‡é¢ç§¯">æˆ¿é¾„æœ€å°çš„20å¥—æˆ¿å­çš„å¹³å‡çœ‹æˆ¿äººæ•°ã€å¹³å‡é¢ç§¯</a></li>
        <li><a href="#æˆ¿å­ä»·æ ¼çš„åˆ†å¸ƒå¹³å‡æ–¹å·®ä¸­ä½æ•°">æˆ¿å­ä»·æ ¼çš„åˆ†å¸ƒ(å¹³å‡ï¼Œæ–¹å·®ï¼Œä¸­ä½æ•°)</a></li>
        <li><a href="#æœ€å—æ¬¢è¿çš„æœå‘å¹³å‡çœ‹æˆ¿äººæ•°">æœ€å—æ¬¢è¿çš„æœå‘(å¹³å‡çœ‹æˆ¿äººæ•°)</a></li>
        <li><a href="#æˆ¿å‹æ•°é‡åˆ†å¸ƒ">æˆ¿å‹æ•°é‡åˆ†å¸ƒ</a></li>
        <li><a href="#æœ€å—æ¬¢è¿çš„æˆ¿å‹">æœ€å—æ¬¢è¿çš„æˆ¿å‹</a></li>
        <li><a href="#æˆ¿å­çš„å¹³å‡ç§Ÿæˆ¿ä»·æ ¼æŒ‰å¹³ç±³ç®—">æˆ¿å­çš„å¹³å‡ç§Ÿæˆ¿ä»·æ ¼(æŒ‰å¹³ç±³ç®—)</a></li>
        <li><a href="#æœ€å—å…³æ³¨çš„å°åŒº">æœ€å—å…³æ³¨çš„å°åŒº</a></li>
        <li><a href="#å‡ºç§Ÿæˆ¿æºæœ€å¤šçš„å°åŒº">å‡ºç§Ÿæˆ¿æºæœ€å¤šçš„å°åŒº</a></li>
        <li><a href="#é›†ä¸­ä¾›æš–å’Œéé›†ä¸­ä¾›æš–çš„æœ‰å¤šå°‘å®¶å¹³å‡ä»·æ ¼æ˜¯å¤šå°‘">é›†ä¸­ä¾›æš–å’Œéé›†ä¸­ä¾›æš–çš„æœ‰å¤šå°‘å®¶ï¼Œå¹³å‡ä»·æ ¼æ˜¯å¤šå°‘</a></li>
        <li><a href="#ä¸åŒæˆ¿å‹çš„å¹³å‡æœ€å¤§æœ€å°é¢ç§¯">ä¸åŒæˆ¿å‹çš„å¹³å‡/æœ€å¤§/æœ€å°é¢ç§¯</a></li>
        <li><a href="#å“ªä¸ªåœ°é“å£é™„è¿‘çš„æˆ¿å­æœ€å¤š">å“ªä¸ªåœ°é“å£é™„è¿‘çš„æˆ¿å­æœ€å¤š</a></li>
        <li><a href="#åœ°é“é™„è¿‘çš„æˆ¿å­å¹³å‡ä»·æ ¼-æ¯”-éåœ°é“çš„é«˜å¤šå°‘">åœ°é“é™„è¿‘çš„æˆ¿å­å¹³å‡ä»·æ ¼ æ¯” éåœ°é“çš„é«˜å¤šå°‘</a></li>
        <li><a href="#åœ°é“é™„è¿‘çš„æˆ¿æºç¦»åœ°é“å¹³å‡è·ç¦»">åœ°é“é™„è¿‘çš„æˆ¿æºç¦»åœ°é“å¹³å‡è·ç¦»</a></li>
        <li><a href="#æœ€å¤šçš„åœ¨ç§Ÿæ¥¼å±‚">æœ€å¤šçš„åœ¨ç§Ÿæ¥¼å±‚</a></li>
        <li><a href="#ç›´æ¥çœ‹æˆ¿çš„æˆ¿å­æ¯”ä¾‹">ç›´æ¥çœ‹æˆ¿çš„æˆ¿å­æ¯”ä¾‹</a></li>
      </ul>
    </li>
    <li><a href="#åŸºäºpandasçš„å†…ç½®å¯è§†åŒ–">åŸºäºpandasçš„å†…ç½®å¯è§†åŒ–</a>
      <ul>
        <li><a href="#åŸºæœ¬ç»˜å›¾">åŸºæœ¬ç»˜å›¾</a></li>
        <li><a href="#æ¡å½¢å›¾">æ¡å½¢å›¾</a></li>
        <li><a href="#ç›´æ–¹å›¾">ç›´æ–¹å›¾</a></li>
        <li><a href="#ç®±å½¢å›¾">ç®±å½¢å›¾</a></li>
        <li><a href="#åŒºåŸŸå—å›¾">åŒºåŸŸå—å›¾</a></li>
        <li><a href="#æ•£ç‚¹å›¾">æ•£ç‚¹å›¾</a></li>
        <li><a href="#é¥¼çŠ¶å›¾">é¥¼çŠ¶å›¾</a></li>
      </ul>
    </li>
    <li><a href="#matplotlibå¯è§†åŒ–æ‰‹å†Œ">Matplotlibå¯è§†åŒ–æ‰‹å†Œ</a>
      <ul>
        <li><a href="#1matplotlib-å®‰è£…é…ç½®">1.matplotlib å®‰è£…é…ç½®</a></li>
        <li><a href="#2ä¸€å¹…å¯è§†åŒ–å›¾çš„åŸºæœ¬ç»“æ„">2.ä¸€å¹…å¯è§†åŒ–å›¾çš„åŸºæœ¬ç»“æ„</a></li>
        <li><a href="#3ç”»æ³•">3.ç”»æ³•</a>
          <ul>
            <li><a href="#31å¯¼åŒ…">3.1å¯¼åŒ…</a></li>
            <li><a href="#32å‡†å¤‡æ•°æ®">3.2å‡†å¤‡æ•°æ®</a></li>
            <li><a href="#33ç»˜åˆ¶åŸºæœ¬æ›²çº¿">3.3ç»˜åˆ¶åŸºæœ¬æ›²çº¿</a></li>
            <li><a href="#231-å…³äºé¢œè‰²çš„è¡¥å……">2.3.1 å…³äºé¢œè‰²çš„è¡¥å……</a></li>
            <li><a href="#333-marker-å‚æ•°">3.3.3 marker å‚æ•°</a></li>
            <li><a href="#34-è®¾ç½®åæ ‡è½´">3.4 è®¾ç½®åæ ‡è½´</a></li>
            <li><a href="#35-è®¾ç½®æ–‡å­—æè¿°æ³¨è§£">3.5 è®¾ç½®æ–‡å­—æè¿°ã€æ³¨è§£</a></li>
            <li><a href="#36-è®¾ç½®å›¾ä¾‹">3.6 è®¾ç½®å›¾ä¾‹</a></li>
            <li><a href="#37-ç½‘æ ¼çº¿å¼€å…³">3.7 ç½‘æ ¼çº¿å¼€å…³</a></li>
            <li><a href="#38-æ˜¾ç¤ºä¸å›¾åƒä¿å­˜">3.8 æ˜¾ç¤ºä¸å›¾åƒä¿å­˜</a></li>
          </ul>
        </li>
        <li><a href="#4å®Œæ•´çš„ç»˜åˆ¶ç¨‹åº">4.å®Œæ•´çš„ç»˜åˆ¶ç¨‹åº</a></li>
      </ul>
    </li>
    <li><a href="#å¸¸ç”¨å›¾å½¢">å¸¸ç”¨å›¾å½¢</a></li>
  </ul>
</nav>
  </div>
</section>



</aside>

<script>
  enquire.register("screen and (max-width: 769px)", {
    match: function () {
      if (document.getElementsByTagName('main')[0]) {
        document.getElementsByTagName('main')[0].className = "main";
      }
      if (document.getElementsByTagName('aside')[0]) {
        document.getElementsByTagName('aside')[0].className = "hide";
      }
    },
    unmatch: function () {
      if (document.getElementsByTagName('main')[0]) {
        document.getElementsByTagName('main')[0].className = "main-main";
      }
      if (document.getElementsByTagName('aside')[0]) {
        document.getElementsByTagName('aside')[0].className = "main-side";
      }
      document.getElementsByClassName('navbar__burger')[0].classList.remove('is-active');
      document.getElementsByClassName('navbar__menu')[0].classList.remove('is-active');
      document.getElementsByClassName('mobile-search')[0].classList.add('hide');
    },
    setup: function () { },
    deferSetup: true,
    destroy: function () { },
  });
</script>




<script defer src="/js/enquire.min.dfb99dee1e029d51d6cfb672d847929890b1585402de17f5ed092edd72a688b4.js"></script>

<script defer src="/js/clipboard.min.1626706afc88d95ebe1173b553ec732c6dc82a576989315fdf5e7779af738a44.js"></script>

<script defer src="/js/lazysizes.min.31dd6a2d3a1ec0f78a8df007535cf23f03aeb5c70f026e6d6a19dac3b3acc340.js"></script>

<script defer src="/js/helper/getParents.min.js"></script>

<script defer src="/js/helper/closest.min.js"></script>

<script defer src="/js/helper/prev.min.js"></script>

<script defer src="/js/helper/prop.min.js"></script>

<script defer src="/js/helper/fadeinout.min.js"></script>


















<script>
  'use strict';

  window.onload = function() {
    var navbar = document.querySelector('.navbar');
    var singleContentsElem = document.querySelector('.single__contents');

    
    function wrap(el, wrapper) {
      el.parentNode.insertBefore(wrapper, el);
      wrapper.appendChild(el);
    }

    (function () {
      singleContentsElem.querySelectorAll('pre > code').forEach(function(elem) {
        var dataLang = elem.getAttribute('data-lang');
        if (!dataLang) {
          var dataLangWrapper = document.createElement('div');
          dataLangWrapper.setAttribute('data-lang', 'Code');
          dataLangWrapper.className = 'language-code';
          wrap(elem.parentNode, dataLangWrapper);
        }
      });
    })();

    var langCodeElem = document.querySelectorAll('.language-code');
    langCodeElem ? langCodeElem.forEach(function (elem) {
      var newElem = document.createElement('span');
      newElem.className = 'copy-to-clipboard';
      newElem.setAttribute('title', 'Copy to clipboard');
      elem.append(newElem);
    }) : null;
    


    
    
    
    var enableBusuanzi = JSON.parse("false");
    var busuanziPagePV = JSON.parse("true");
    
    if (enableBusuanzi && busuanziPagePV) {
      var pagePvElem = document.querySelector('#busuanzi_value_page_pv');
      pagePvElem.textContent = pagePvElem.textContent.replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
    }    
    


    
    
    
    
    var enableToc = JSON.parse("true");
    var toc = JSON.parse("null");
    var hideToc = JSON.parse("false");
    
    if (enableToc || toc) {
      var tableOfContentsElem = document.querySelector('.toc').querySelector('#TableOfContents');
      tableOfContentsElem.querySelectorAll('ul > li').forEach(function (liElem) {
        liElem.querySelectorAll('ul').forEach(function (ulElem) {
          ulElem.style.display = 'none';
        });
      });

      tableOfContentsElem.querySelectorAll('a').forEach(function(elem) {
        elem.addEventListener('click', function() {
          var id = elem.getAttribute('id');
          navbar.classList.remove('navbar--show');
          navbar.classList.remove('navbar--hide');
          navbar.classList.add('navbar--hide');

          document.querySelector('.toc').querySelectorAll('a').forEach(function(elem) {
            elem.classList.remove('active');
          });
          elem.classList.add('active');

          tableOfContentsElem.querySelectorAll('ul > li').forEach(function (liElem) {
            liElem.querySelectorAll('ul').forEach(function(ulElem) {
              ulElem.style.display = 'none';
            });
          });

          var curElem = tableOfContentsElem.querySelector(`[href="#${id}"]`);
          if (curElem && curElem.nextElementSibling) {
            curElem.nextElementSibling.style.display = 'block';
          }
          if (curElem) {
            getParents(curElem, 'ul') ? 
            getParents(curElem, 'ul').forEach(function (elem) {
              elem.style.display = 'block';
            }) : null;
          }
        });
      });

      
      var toggleTocElem = document.querySelector("#toggle-toc");
      var tocElem = document.querySelector('.toc');
      var mainElem = document.querySelector('main');
      var sideElem = document.querySelector('side');
      var tocFlexboxElem = document.querySelector('.toc__flexbox');

      toggleTocElem ? 
      toggleTocElem.addEventListener('change', function(e) {
        if (e.target.checked) {
          if (tocElem) {
            fadeIn(tocElem, 200);
          }
          if (tocFlexboxElem) {
            tocFlexboxElem.setAttribute('data-position', 'fixed');
          }

          if (mainElem) {
            mainElem.classList.remove('main-main');
            mainElem.classList.remove('main');
            mainElem.classList.add('main-main');
          }
          if (sideElem) {
            sideElem.classList.remove('main-side');
          }
        } else {
          if (tocElem) {
            fadeOut(tocElem, 200);
          }
          if (tocFlexboxElem) {
            tocFlexboxElem.setAttribute('data-position', 'absolute');
          }

          if (mainElem) {
            mainElem.classList.remove('main-main');
            mainElem.classList.remove('main');
            mainElem.classList.add('main');
          }
          if (sideElem) {
            sideElem.classList.remove('main-side');
          }
        }
      }) : null;
    }
    


    
    var tables = document.querySelectorAll('.single__contents > table');
    for (let i = 0; i < tables.length; i++) {
      var table = tables[i];
      var wrapper = document.createElement('div');
      wrapper.className = 'table-wrapper';
      table.parentElement.replaceChild(wrapper, table);
      wrapper.appendChild(table);
    }
    


    
    var text, clip = new ClipboardJS('.anchor');
    var headers = singleContentsElem.querySelectorAll("h1, h2, h3, h4");
    
    headers ? 
    headers.forEach(function (elem) {
      var url = encodeURI(document.location.origin + document.location.pathname);
      var link = url + "#" + elem.getAttribute('id');
      
      var newElemOuter = document.createElement('span');
      newElemOuter.classList.add('anchor');
      newElemOuter.classList.add('hide');
      newElemOuter.setAttribute('data-clipboard-text', link);
      newElemOuter.style.position = 'relative';

      var newElemInner = document.createElement('span');
      newElemInner.style.fontSize = '1rem';
      newElemInner.style.position = 'absolute';
      newElemInner.style.right = '-2rem';
      newElemInner.style.top = '50%';
      newElemInner.style.transform = 'translateY(-50%)';
      newElemInner.innerText = "ğŸ”—";

      newElemOuter.append(newElemInner);
      elem.append(newElemOuter);

      elem.addEventListener('mouseenter', function() {
        this.querySelector('.anchor').classList.remove('hide');
      });
      elem.addEventListener('mouseleave', function () {
        this.querySelector('.anchor').classList.add('hide');
      });
    }) : null;

    document.querySelectorAll('.anchor').forEach(function(elem) {
      elem.addEventListener('mouseleave', function() {
        elem.setAttribute('aria-label', null);
        elem.classList.remove('tooltipped');
        elem.classList.remove('tooltipped-s');
        elem.classList.remove('tooltipped-w');
      });
    });

    clip.on('success', function (e) {
      e.clearSelection();
      e.trigger.setAttribute('aria-label', 'Link copied to clipboard!');
      e.trigger.classList.add('tooltipped');
      e.trigger.classList.add('tooltipped-s');
    });
    


    
    var clipInit = false;
    var preChromaElem = document.querySelectorAll('pre.chroma');
    var langCodeElem = document.querySelectorAll('.language-code');
    var makeClipboard = function(elem) {
      var code = elem,
        text = elem.textContent;

      if (text.length > 30) {
        if (!clipInit) {
          var text, clip = new ClipboardJS('.copy-to-clipboard', {
            text: function (trigger) {
              var codeElem = prev(trigger).querySelectorAll('code');
              if (codeElem.length > 1) {
                text = prev(trigger).querySelector('code[class^="language-"]').textContent;
              } else {
                text = prev(trigger).querySelector('code').textContent;
              }

              return text.replace(/^\$\s/gm, '');
            }
          });

          var inPre;
          clip.on('success', function (e) {
            e.clearSelection();
            inPre = prop(e.trigger.parentNode, 'tagName') == 'PRE';
            e.trigger.setAttribute('aria-label', 'Copied to clipboard!');
            e.trigger.classList.add('tooltipped');
            e.trigger.classList.add('tooltipped-w');
          });

          clip.on('error', function (e) {
            inPre = prop(e.trigger.parentNode, 'tagName') == 'PRE';
            e.trigger.setAttribute('aria-label', e.action.toString());
            e.trigger.classList.add('tooltipped');
            e.trigger.classList.add('tooltipped-w');
          });

          clipInit = true;
        }

        var notAllowedClass = ['language-mermaid', 'language-viz', 'language-wave', 'language-chart', 'language-msc', 'language-flowchart'];
        var isNotAllowedIncluded = false;
        var curClassName = code.getAttribute('class');

        for (let str of notAllowedClass) {
          if (curClassName && curClassName.startsWith(str)) {
            isNotAllowedIncluded = true;
            break;
          }
        }

        if (!isNotAllowedIncluded) {
          if (curClassName) {
            var newClipboardElem = document.createElement('span');
            newClipboardElem.setAttribute('class', 'copy-to-clipboard');
            newClipboardElem.setAttribute('title', 'Copy to clipboard');
            closest(code, 'div.chroma').append(newClipboardElem);
          }
        }
      }
    }

    preChromaElem ? 
    preChromaElem.forEach(function(elem) {
      elem.querySelectorAll('code').forEach(function(codeElem) {
        makeClipboard(codeElem);
      });
    }) : null;
    
    langCodeElem ? 
    langCodeElem.forEach(function(elem) {
      elem.querySelectorAll('code').forEach(function (codeElem) {
        makeClipboard(codeElem);
      });
    }) : null;
    


    
    
    var lib = JSON.parse("null");

    if (lib && lib.includes('mermaid')) {
      
      var themeVariant = localStorage.getItem('theme') || JSON.parse("\"dark\"");

      if (themeVariant === "dark" || themeVariant === "hacker") {
        mermaid.initialize({ theme: 'dark' });
      } else {
        mermaid.initialize({ theme: 'default' });
      }
      
      var mermaids = [];
      [].push.apply(mermaids, document.getElementsByClassName('language-mermaid'));
      mermaids.forEach(function(elem) {
        var elemParentNode = elem.parentNode;

        if (elemParentNode !== document.body) {
          elemParentNode.parentNode.insertBefore(elem, elemParentNode);
          elemParentNode.parentNode.removeChild(elemParentNode);
        }

        var newElemWrapper = document.createElement('div');
        newElemWrapper.classList.add('mermaid');
        newElemWrapper.style.padding = '34px 4px 6px';
        newElemWrapper.innerHTML = elem.innerHTML;
        elem.replaceWith(newElemWrapper);
      });
    }
    
    

    
    if (lib && lib.includes('katex')) {
      var mathElements = document.getElementsByClassName('math');
      var options = [
        { left: "$$", right: "$$", display: true },
        { left: "\\(", right: "\\)", display: false },
        { left: "\\[", right: "\\]", display: true }
      ];

      renderMathInElement(document.querySelector('.single__contents'), options);
    }
    


    
    if (lib && lib.includes('flowchartjs')) {
      
      var options = JSON.parse("{\"arrow-end\":\"block\",\"element-color\":\"black\",\"fill\":\"white\",\"flowstate\":{\"approved\":{\"fill\":\"#58C4A3\",\"font-size\":12,\"no-text\":\"n/a\",\"yes-text\":\"APPROVED\"},\"current\":{\"fill\":\"yellow\",\"font-color\":\"red\",\"font-weight\":\"bold\"},\"future\":{\"fill\":\"#FFFF99\"},\"invalid\":{\"fill\":\"#444444\"},\"past\":{\"fill\":\"#CCCCCC\",\"font-size\":12},\"rejected\":{\"fill\":\"#C45879\",\"font-size\":12,\"no-text\":\"REJECTED\",\"yes-text\":\"n/a\"},\"request\":{\"fill\":\"blue\"}},\"font-color\":\"black\",\"font-size\":14,\"line-color\":\"black\",\"line-length\":50,\"line-width\":3,\"no-text\":\"no\",\"scale\":1,\"symbols\":{\"end\":{\"class\":\"end-element\"},\"start\":{\"element-color\":\"green\",\"fill\":\"yellow\",\"font-color\":\"red\"}},\"text-margin\":10,\"x\":0,\"y\":0,\"yes-text\":\"yes\"}");
      var jsonContent = null;

      var flowchartPrefix = "language-flowchart";
      var index = 0;
      Array.prototype.forEach.call(document.querySelectorAll("[class^=" + flowchartPrefix + "]"), function(x){
          x.style.display = 'none'
          x.parentNode.style.backgroundColor = "transparent"
          jsonContent = x.innerText;

          var node0 = document.createElement('div');
          node0.id = 'flowchart' + index;
          x.parentNode.insertBefore(node0, x);

          var diagram = flowchart.parse(jsonContent);
          diagram.drawSVG("flowchart"+index, options);

          index +=1;
      });      
    }
    


    
    if (lib && lib.includes('mathjax')) {
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']],
          processEscapes: false,
          packages: { '[+]': ['noerrors'] }
        },
        loader: {
          load: ['[tex]/noerrors']
        },
      };
    }
    


    
    if (lib && lib.includes('msc')) {
      
      var options = JSON.parse("{\"theme\":\"hand\"}");
      var jsonContent = null;

      var index = 0;
      var chartPrefix = "language-msc";
      Array.prototype.forEach.call(document.querySelectorAll("[class^=" + chartPrefix + "]"), function (x) {
        x.style.display = 'none'
        x.parentNode.style.backgroundColor = "transparent"
        jsonContent = x.innerText;
        var node0 = document.createElement('div');
        node0.id = 'msc' + index;
        x.parentNode.insertBefore(node0, x);
        var diagram = Diagram.parse(jsonContent);
        diagram.drawSVG("msc" + index, options);
        index += 1;
      });
    }
    


    
    if (lib && lib.includes('chart')) {
      var borderColor = "#666";
      var bgColor = "#ddd";
      var borderWidth = 2;

      Chart.defaults.global.elements.rectangle.borderWidth = borderWidth;
      Chart.defaults.global.elements.rectangle.borderColor = borderColor;
      Chart.defaults.global.elements.rectangle.backgroundColor = bgColor;

      Chart.defaults.global.elements.line.borderWidth = borderWidth;
      Chart.defaults.global.elements.line.borderColor = borderColor;
      Chart.defaults.global.elements.line.backgroundColor = bgColor;

      Chart.defaults.global.elements.point.borderWidth = borderWidth;
      Chart.defaults.global.elements.point.borderColor = borderColor;
      Chart.defaults.global.elements.point.backgroundColor = bgColor;

      var chartPrefix = "language-chart";
      var index = 0;
      var jsonContent = null;

      Array.prototype.forEach.call(document.querySelectorAll("[class^=" + chartPrefix + "]"), function (x) {
        x.style.display = 'none'
        x.parentNode.style.backgroundColor = "transparent"
        jsonContent = x.innerText;
        var node0 = document.createElement('canvas');
        var source = null;
        node0.height = 200;
        node0.style.height = 200;
        node0.id = 'myChart' + index;
        source = JSON.parse(jsonContent);
        x.parentNode.insertBefore(node0, x);
        var ctx = document.getElementById('myChart' + index).getContext('2d');
        var myChart = new Chart(ctx, source);
        index += 1;
      });            
    }
    


    
    if (lib && lib.includes('wavedrom')) {
      var wavePrefix = "language-wave";
      var index = 0;
      var jsonContent = null;
      
      Array.prototype.forEach.call(document.querySelectorAll("[class^=" + wavePrefix + "]"), function (x) {
        x.style.display = 'none'
        x.parentNode.style.backgroundColor = "transparent"
        jsonContent = x.innerText;
        var node0 = document.createElement('div');
        var source = null;
        node0.id = 'WaveDrom_Display_' + index;
        source = JSON.parse(jsonContent);
        x.parentNode.insertBefore(node0, x);
        WaveDrom.RenderWaveForm(index, source, "WaveDrom_Display_");
        index += 1;
      });
    }
    


    
    if (lib && lib.includes('viz')) {
      var vizPrefix = "language-viz-";
      Array.prototype.forEach.call(document.querySelectorAll("[class^=" + vizPrefix + "]"), function (x) {
        x.style.display = 'none'
        x.parentNode.style.backgroundColor = "transparent"
        var engine;
        x.getAttribute("class").split(" ").forEach(function (cls) {
          if (cls.startsWith(vizPrefix)) {
            engine = cls.substr(vizPrefix.length);
          }
        });
        var viz = new Viz();
        viz.renderSVGElement(x.innerText, { engine: engine })
          .then(function (element) {
            element.style.width = "100%";
            x.parentNode.insertBefore(element, x);
          })
      });
    }
    
    
  }
</script>


            
            <footer class="footer">
    
<div class="dropdown">
  <button class="dropdown-trigger" aria-label="Select Theme Button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentColor" d="M12.65 15.67c.14-.36.05-.77-.23-1.05l-2.09-2.06.03-.03c1.74-1.94 2.98-4.17 3.71-6.53h1.94c.54 0 .99-.45.99-.99v-.02c0-.54-.45-.99-.99-.99H10V3c0-.55-.45-1-1-1s-1 .45-1 1v1H1.99c-.54 0-.99.45-.99.99 0 .55.45.99.99.99h10.18C11.5 7.92 10.44 9.75 9 11.35c-.81-.89-1.49-1.86-2.06-2.88-.16-.29-.45-.47-.78-.47-.69 0-1.13.75-.79 1.35.63 1.13 1.4 2.21 2.3 3.21L3.3 16.87c-.4.39-.4 1.03 0 1.42.39.39 1.02.39 1.42 0L9 14l2.02 2.02c.51.51 1.38.32 1.63-.35zM17.5 10c-.6 0-1.14.37-1.35.94l-3.67 9.8c-.24.61.22 1.26.87 1.26.39 0 .74-.24.88-.61l.89-2.39h4.75l.9 2.39c.14.36.49.61.88.61.65 0 1.11-.65.88-1.26l-3.67-9.8c-.22-.57-.76-.94-1.36-.94zm-1.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>
  </button>
  <div class="dropdown-content">
    
    
    
      
      
        
        
          
            
              <a href="https://lczen.github.io/en/posts/dataanalysis/" data-lang="en" class="dropdown-item is-active">English</a>
            
          
        
      
        
      
    
  </div>
</div>

    
    
<div id="gtt">
  <div class="gtt">
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M8.12 14.71L12 10.83l3.88 3.88c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 8.71c-.39-.39-1.02-.39-1.41 0L6.7 13.3c-.39.39-.39 1.02 0 1.41.39.38 1.03.39 1.42 0z"/></svg>
  </div>
</div>

    <hr />

    <div class="footer__poweredby">
        
                
            <p class="caption">
                
                    Â©2020, All Rights Reserved
                
            </p>
        

        
    </div> 
</footer>
        </div>    
    </div>
</body>

</html>